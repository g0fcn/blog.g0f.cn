
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.26.8" theme-name="Stellar" theme-version="1.26.8">
  
  <meta name="generator" content="Hexo 6.3.0">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>如何正确地理解应用架构并开发 - 果粉圈</title>

  
    <meta name="description" content="许多同学或多或少都经历过这样的流程：    新同学刚来公司，学习了解团队的一些工程代码，并了解其中的代码风格    团队新接手了一些其他团队的项目，需要了解工程结构以及概念    如何定义工程项目的工程结构，包目录结构并达成团队共识   如果你有上述经历，并对工程应用之中的Module划分及其背后的意义理解上存在一些困扰， 那本文对你或许会有一些帮助。">
<meta property="og:type" content="article">
<meta property="og:title" content="如何正确地理解应用架构并开发">
<meta property="og:url" content="https://blog.g0f.cn/post/b8a25cde.html">
<meta property="og:site_name" content="果粉圈">
<meta property="og:description" content="许多同学或多或少都经历过这样的流程：    新同学刚来公司，学习了解团队的一些工程代码，并了解其中的代码风格    团队新接手了一些其他团队的项目，需要了解工程结构以及概念    如何定义工程项目的工程结构，包目录结构并达成团队共识   如果你有上述经历，并对工程应用之中的Module划分及其背后的意义理解上存在一些困扰， 那本文对你或许会有一些帮助。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/0c87b415-37eb-440b-8adc-76f3ca02d100.gif">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/e960db52-4e96-424f-b406-df51c37c742e.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/4a4ae94e-2564-4cb0-a399-fe49a3b0e877.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/7bde28db-0d81-4d94-b7a5-48a794f593ed.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/c2180234-fd18-4cab-aab2-7e9f3070e67c.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/fdc1f6dc-a414-495a-b875-65bdab468d4e.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/05ec1d42-e967-428a-88fd-74f9ad2e6c3c.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/a929931a-4713-46c2-9a7d-5227f819e50c.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/65ea2855-2026-4c61-a8fe-7ed93622262d.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/49021b5e-1817-4714-a414-96acb32c49ff.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/f3e8a852-7090-467f-aa4f-7254eb06b14a.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/3ebfee95-a24f-47bd-b474-dc96ad4f3a87.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/d423be6a-24b5-4179-bfb2-a4fc1aa1748b.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/749413df-dbfc-4d07-b658-1fc03b2dafdd.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/d3163f4a-3913-4082-bc7d-6b28aad6c6e6.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/78d059c9-4ae5-4089-aca0-5f8422ee37f4.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/d538f5d3-154d-43a4-a169-3328b83b9ff5.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/50319171-c58a-43c5-bd57-181b256d2a91.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/76aa5bfd-ee6e-4774-8761-982379ec70f0.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/73ed6593-5145-4565-a5a4-c747195ebd23.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/41867f9b-46b8-49e0-9564-3eb91352c744.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/57d84e5a-add9-4bf6-8b90-09f999aec8bc.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/dc7e6e5c-a869-4f07-a24a-8693b7e2b068.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/cb72549b-6a33-43ff-9174-1575cd6b8307.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/8939ad18-3832-4d6d-a27f-74a94709eb8b.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/19fe59c6-305f-47e9-ab18-3b7054b9190f.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/7e7560a4-ca89-42f8-9c49-bbf2685d179a.jpg">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/f5175d58-58b3-4bdb-b562-642dcc9ac95c.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/ae8026bc-c1cd-4833-a97a-d6baf9d29317.png">
<meta property="og:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/346aecb5-6194-4248-960e-bc26e019a878.png">
<meta property="article:published_time" content="2024-02-17T08:15:41.000Z">
<meta property="article:modified_time" content="2024-02-17T08:15:41.000Z">
<meta property="article:author" content="naive">
<meta property="article:tag" content="媒体">
<meta property="article:tag" content="开源中国">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/0c87b415-37eb-440b-8adc-76f3ca02d100.gif">
  
  
  
  <meta name="keywords" content="媒体,开源中国">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="果粉圈" type="application/atom+xml">
  

  <link rel="stylesheet" href="/css/main.css?v=1.26.8">

  

  

  
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post"><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/avatar.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">果粉圈</div><div class="sub normal cap">明明只是玩玩而已😃</div><div class="sub hover cap" style="opacity:0"> 你居然还当真了😭</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewbox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"/><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"/></svg></a><input type="text" class="search-input" id="search-input" placeholder="站内搜索"></form><div id="search-result"></div><div class="search-no-result">没有找到内容！</div></div>


<nav class="menu dis-select"><a class="nav-item active" title="博客" href="/" style="color:#1BCDFC"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.879 2.879C5 3.757 5 5.172 5 8v8c0 2.828 0 4.243.879 5.121C6.757 22 8.172 22 11 22h2c2.828 0 4.243 0 5.121-.879C19 20.243 19 18.828 19 16V8c0-2.828 0-4.243-.879-5.121C17.243 2 15.828 2 13 2h-2c-2.828 0-4.243 0-5.121.879M8.25 17a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75M9 12.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 0 1.5H9A.75.75 0 0 1 8.25 9" clip-rule="evenodd"/><path fill="currentColor" d="M5.235 4.058C5 4.941 5 6.177 5 8v8c0 1.823 0 3.058.235 3.942L5 19.924c-.975-.096-1.631-.313-2.121-.803C2 18.243 2 16.828 2 14v-4c0-2.829 0-4.243.879-5.121c.49-.49 1.146-.707 2.121-.803zm13.53 15.884C19 19.058 19 17.822 19 16V8c0-1.823 0-3.059-.235-3.942l.235.018c.975.096 1.631.313 2.121.803C22 5.757 22 7.17 22 9.999v4c0 2.83 0 4.243-.879 5.122c-.49.49-1.146.707-2.121.803z" opacity=".5"/></svg></a><a class="nav-item" title="文档" href="/" style="color:#3DC550"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M14.25 4.48v3.057c0 .111 0 .27.02.406a.936.936 0 0 0 .445.683a.96.96 0 0 0 .783.072c.13-.04.272-.108.378-.159L17 8.005l1.124.534c.106.05.248.119.378.16a.958.958 0 0 0 .783-.073a.936.936 0 0 0 .444-.683c.021-.136.021-.295.021-.406V3.031c.113-.005.224-.01.332-.013C21.154 2.98 22 3.86 22 4.933v11.21c0 1.112-.906 2.01-2.015 2.08c-.97.06-2.108.179-2.985.41c-1.082.286-1.99 1.068-3.373 1.436c-.626.167-1.324.257-1.627.323V5.174c.32-.079 1.382-.203 1.674-.371c.184-.107.377-.216.576-.323m5.478 8.338a.75.75 0 0 1-.546.91l-4 1a.75.75 0 0 1-.364-1.456l4-1a.75.75 0 0 1 .91.546" clip-rule="evenodd"/><path fill="currentColor" d="M18.25 3.151c-.62.073-1.23.18-1.75.336a8.2 8.2 0 0 0-.75.27v3.182l.75-.356l.008-.005a1.13 1.13 0 0 1 .492-.13c.047 0 .094.004.138.01c.175.029.315.1.354.12l.009.005l.749.356V3.647z"/><path fill="currentColor" d="M12 5.214c-.334-.064-1.057-.161-1.718-.339C8.938 4.515 8.05 3.765 7 3.487c-.887-.234-2.041-.352-3.018-.412C2.886 3.007 2 3.9 2 4.998v11.146c0 1.11.906 2.01 2.015 2.079c.97.06 2.108.179 2.985.41c.486.129 1.216.431 1.873.726c1.005.451 2.052.797 3.127 1.034z" opacity=".5"/><path fill="currentColor" d="M4.273 12.818a.75.75 0 0 1 .91-.545l4 1a.75.75 0 1 1-.365 1.455l-4-1a.75.75 0 0 1-.545-.91m.909-4.545a.75.75 0 1 0-.364 1.455l4 1a.75.75 0 0 0 .364-1.455z"/></svg></a><a class="nav-item" title="探索" href="/" style="color:#FA6400"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg></a><a class="nav-item" title="社交" href="/" style="color:#F44336"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" d="m13.629 20.472l-.542.916c-.483.816-1.69.816-2.174 0l-.542-.916c-.42-.71-.63-1.066-.968-1.262c-.338-.197-.763-.204-1.613-.219c-1.256-.021-2.043-.098-2.703-.372a5 5 0 0 1-2.706-2.706C2 14.995 2 13.83 2 11.5v-1c0-3.273 0-4.91.737-6.112a5 5 0 0 1 1.65-1.651C5.59 2 7.228 2 10.5 2h3c3.273 0 4.91 0 6.113.737a5 5 0 0 1 1.65 1.65C22 5.59 22 7.228 22 10.5v1c0 2.33 0 3.495-.38 4.413a5 5 0 0 1-2.707 2.706c-.66.274-1.447.35-2.703.372c-.85.015-1.275.022-1.613.219c-.338.196-.548.551-.968 1.262" opacity=".5"/><path fill="currentColor" d="M10.99 14.308c-1.327-.978-3.49-2.84-3.49-4.593c0-2.677 2.475-3.677 4.5-1.609c2.025-2.068 4.5-1.068 4.5 1.609c0 1.752-2.163 3.615-3.49 4.593c-.454.335-.681.502-1.01.502c-.329 0-.556-.167-1.01-.502"/></svg></a></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">最近更新</span></div><div class="widget-body fs14"><a class="item title" href="/post/5855cd9f.html"><span class="title">（新春走基层）年画非遗传承人的坚守与创新</span></a><a class="item title" href="/post/d79129e7.html"><span class="title">邂逅国潮繁花浪漫 这些地方龙年“潮”味拉满了！</span></a><a class="item title" href="/post/1b884d7c.html"><span class="title">锦绣中国年｜在日本感受龙年春节的浓浓“年味儿”</span></a><a class="item title" href="/post/5d328e1e.html"><span class="title">香港廉政公署成立50周年：见证香港半世纪反贪史</span></a><a class="item title" href="/post/4161bef1.html"><span class="title">马克龙与以色列总理内塔尼亚胡通电话讨论加沙局势</span></a><a class="item title" href="/post/be57e44b.html"><span class="title">（新春见闻）春节假期三亚兴起空中看海热</span></a><a class="item title" href="/post/c1eb7f63.html"><span class="title">印尼国防部长普拉博沃宣布赢得总统选举</span></a><a class="item title" href="/post/ac817149.html"><span class="title">多功能新能源补给站助力交通绿色转型 电力耗能实现“碳中和”</span></a><a class="item title" href="/post/21e55478.html"><span class="title">巴黎上诉法院维持萨科齐在竞选资金超标案中的有罪判决</span></a><a class="item title" href="/post/732f6c75.html"><span class="title">快速计票统计显示：普拉博沃赢得印尼大选</span></a></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/08a41b181ce68.svg"></a><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/3845874.svg"></a><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/3616429.svg"></a><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/942ebbf1a4b91.svg"></a></div></footer>
</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">主页</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">文章</a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/%E5%AA%92%E4%BD%93/">媒体</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/%E5%AA%92%E4%BD%93/%E5%BC%80%E6%BA%90%E4%B8%AD%E5%9B%BD/">开源中国</a></div>
<div class="flex-row" id="post-meta"><span class="text created">发布于：<time datetime="2024-02-17T08:15:41.000Z">2024-02-17</time></span><span class="sep updated"></span><span class="text updated">更新于：<time datetime="2024-02-17T08:15:41.000Z">2024-02-17</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>如何正确地理解应用架构并开发</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><div>
<div class="content">
<div class="rich_media_content js_underline_content autoTypeSetting24psection" id="js_content">
<section data-mpa-powered-by="yiban.io" style="margin-bottom: 8px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: center;visibility: visible;">
<img class="rich_pages wxw-img __bg_gif lazy" data-backh="96" data-backw="578" data-cropselx1="0" data-cropselx2="578" data-cropsely1="0" data-cropsely2="96" data-imgfileid="503042079" data-ratio="0.16666666666666666" data-type="gif" data-w="636" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/0c87b415-37eb-440b-8adc-76f3ca02d100.gif" style="outline: 0px;letter-spacing: 0.544px;font-size: var(--articleFontsize);border-radius: 8px;text-align: justify;width: 100%;visibility: visible !important;background-size: 16px !important;height: auto;">
<br style="outline: 0px;visibility: visible;">
</section>
<section data-mpa-category="模板" data-mpa-template="t" data-mpa-template-id="502" style="outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);visibility: visible;">
<section data-mid data-mpa-category="模板" style="padding-right: 1px;padding-left: 1px;outline: 0px;width: 677px;display: flex;justify-content: flex-start;align-items: center;flex-direction: column;visibility: visible;">
<section data-mid style="outline: 0px;letter-spacing: 0.544px;width: 675px;display: grid;grid-template-columns: 26px auto;visibility: visible;">
<section data-mid style="outline: 0px;width: 26px;height: 14px;display: flex;justify-content: center;align-items: center;align-self: center;visibility: visible;">
<br style="outline: 0px;visibility: visible;">
</section>
<section data-mid style="padding-left: 7px;outline: 0px;display: flex;justify-content: flex-start;align-items: center;visibility: visible;">
<section data-mid style="margin-right: 7px;outline: 0px;text-align: left;visibility: visible;">
<p data-mid style="outline: 0px;width: 0px;font-size: 14px;font-family: PingFangSC-Semibold, "PingFang SC";font-weight: bold;color: rgb(58, 92, 244);line-height: 20px;visibility: visible;"><br style="outline: 0px;visibility: visible;"></p>
</section>
<section data-mid style="margin-bottom: 4px;outline: 0px;width: 635px;height: 1px;border-top: 1px solid rgb(58, 92, 244);align-self: flex-end;visibility: visible;">
<br style="outline: 0px;visibility: visible;">
</section>
</section>
</section>
<section data-mid style="padding: 7px 14px 9px 19px;outline: 0px;width: 675px;text-align: left;border-bottom: 1px solid rgb(58, 92, 244);visibility: visible;">
<p style="margin-top: 8px;outline: 0px;min-height: 24px;letter-spacing: 0.578px;text-align: justify;visibility: visible;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgba(25, 26, 31, 0.9);letter-spacing: 1px;text-align: left;font-size: 15px;">许多同学或多或少都经历过这样的流程：</span></p>
<ol class="list-paddingleft-1" style="width: 577.422px;letter-spacing: 0.578px;text-wrap: wrap;">
<li style="font-size: 15px;">
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="color: rgba(25, 26, 31, 0.9);letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;">新同学刚来公司，学习了解团队的一些工程代码，并了解其中的代码风格</span>
</section></li>
<li style="font-size: 15px;">
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="color: rgba(25, 26, 31, 0.9);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 1px;font-size: 15px;">团队新接手了一些其他团队的项目，需要了解工程结构以及概念</span>
</section></li>
<li style="font-size: 15px;">
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="color: rgba(25, 26, 31, 0.9);letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;">如何定义工程项目的工程结构，包目录结构并达成团队共识</span>
</section></li>
</ol>
<p style="margin-top: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;letter-spacing: 1px;color: rgba(25, 26, 31, 0.9);font-size: 15px;">如果你有上述经历，并对工程应用之中的Module划分及其背后的意义理解上存在一些困扰， 那本文对你或许会有一些帮助。</span></p>
</section>
</section>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<strong><span style="box-sizing: inherit;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">理解代码从理解应用架构开始</span></strong>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);visibility: visible;line-height: 1.75em;"><br></p>
<section style="margin-bottom: 0px;outline: 0px;box-sizing: inherit;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgba(25, 26, 31, 0.9);font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Arial, sans-serif;font-size: 16px;text-align: center;visibility: visible;line-height: 1.75em;">
<span style="outline: 0px;visibility: visible;font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042075" data-ratio="0.3161764705882353" data-s="300,640" data-type="png" data-w="408" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/e960db52-4e96-424f-b406-df51c37c742e.png" style="outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible !important;width: 113px !important;"></span>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(34, 34, 34);text-align: center;visibility: visible;line-height: normal;">
<span style="outline: 0px;color: rgb(3, 69, 255);font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 18px;letter-spacing: 1px;visibility: visible;">应用架构</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;outline: 0px;line-height: 1.75em;visibility: visible;">
<br>
</section>
<span id="OSC_h4_1"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">混乱的应用架构</span></strong></span></h4>
<section style="margin-top: 8px;margin-bottom: 8px;outline: 0px;line-height: 1.75em;visibility: visible;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">最近看了一些业务工程的代码，发现业务系统非常混乱，混乱主要体现在：</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span data-cangjie-key="30:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="30:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">应用的层次结构混乱：</span>
<span data-cangjie-key="30:10" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="30:10" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">不知道应用应该如何分层、应该包含哪些组件、组件之间的关系是什么</span>
<span data-cangjie-key="30:41" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="30:41" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">；</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span data-cangjie-key="33:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="33:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">缺少规范的指导和约束：</span>
<span data-cangjie-key="33:11" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="33:11" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">新加一段业务逻辑不知道放在什么地方（哪个类，哪个包）、应该起什么名字比较合适</span>
<span data-cangjie-key="33:49" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="33:49" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">？</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span data-cangjie-key="36:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="36:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">每个工程的Module数量不一样，Module的命名和定义不一样，不同的Module之间的依赖关系混乱（延伸下就是：</span>
<strong><span data-cangjie-key="36:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="36:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">Module和Package的作用不清晰，不能很好的区分两者之间的区别</span></strong>
<span data-cangjie-key="36:93" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="36:93" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">）</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="39:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="39:0" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">但有一个</span><span data-cangjie-key="39:4" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="39:4" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">共同点就是都很复杂</span><span data-cangjie-key="39:13" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="39:13" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">。导致复杂性的原因有很多，如果从架构的层面看，主要有两点：</span></span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">架构设计过于复杂，层次太多能把人绕晕。</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">架构简单，ServiceImpl作为上帝类包揽一切，一杆捅到DAO（就简单场景而言，这种Transaction Script也还凑合，至少实现上手都快。</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">这种人为的复杂性导致系统越来越臃肿，越来越难维护，新来的同学，往往要捂着鼻子抠几天甚至几个月，才能理清系统和业务脉络，然后又一头扎进各种bug fix，业务修补的恶性循环中，暗无天日！</span>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><span style="color: rgba(25, 26, 31, 0.9);text-wrap: wrap;">（Transaction Script地址：</span>https://martinfowler.com/eaaCatalog/transactionScript.html）</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<span id="OSC_h4_2"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;margin-bottom: 8px;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">有序的应用架构</span></strong></span></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">一个没有架构的应用系统，就像一堆随意堆放、杂乱无章的玩具，只有熵值，没有熵减。而一个有良好架构的应用系统，有章法、有结构，一切都显得井井有条。</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;text-align: center;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503041985" data-ratio="0.3731481481481482" data-type="other" data-w="1080" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/4a4ae94e-2564-4cb0-a399-fe49a3b0e877.jpg"></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;text-align: justify;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">好的组织架构会遵循一定的架构模式，大部分的组织都会按职能和业务来设计自己的架构。如果你反其道而行之，硬要把销售、财务和技术人员放在一个部门，就会显得很奇怪。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="72:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="72:0" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">对于应用架构而言，</span><span data-cangjie-key="72:9" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="72:9" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">代码是其核心组成要素，结构就是这些代码该如何被组织</span><span data-cangjie-key="72:34" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="72:34" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">，也就是要如何处理</span></span><span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;font-weight: bold;color: rgba(25, 26, 31, 0.9);">模块（Module）</span><span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;color: rgba(25, 26, 31, 0.9);">、</span><span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;font-weight: bold;color: rgba(25, 26, 31, 0.9);">包（Package）</span><span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;color: rgba(25, 26, 31, 0.9);">和</span><span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;font-weight: bold;color: rgba(25, 26, 31, 0.9);">类（Class）</span><span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="72:74" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="72:74" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">之间的关系。简而言之，</span><span data-cangjie-key="72:85" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="72:85" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">应用架构就是要解决代码要如何被组织的问题。</span></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;font-weight: bold;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<span id="OSC_h4_3"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">包和模块之间的区别</span></strong></span></h4>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><br></p>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">包和模块这两个概念是比较容易发生混淆的。比如在《实现领域驱动设计》中，作者就说：</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="87:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="87:0" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-style: italic;">If you are using Java or C#, you are already familiar with </span><span data-cangjie-key="87:59" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="87:59" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);font-style: italic;">Modules</span><span data-cangjie-key="87:66" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="87:66" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-style: italic;">, though you know them by another name. Java calls them packages. C# calls them namespaces.</span></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">他认为Module是Package，这个定义容易造成混淆。特别是在使用Maven的时候，在Maven中，Module是一个Artifact，通常是一个Jar而不是Package。比如NBF-Falcon Framework基础类型的工程就包括如下3个Module：</span>
</section>
<section class="code-snippet__fix code-snippet__js">
<pre class="code-snippet__js" data-lang="ruby"><code><span class="code-snippet_outer">&lt;modules&gt;</span></code><code><span class="code-snippet_outer">    &lt;<span class="code-snippet__class"><span class="code-snippet__keyword">module</span>&gt;&#123;应用<span class="code-snippet__title">Code</span>&#125;-<span class="code-snippet__title">api</span>&lt;/<span class="code-snippet__title">module</span>&gt;</span></span></code><code><span class="code-snippet_outer">    &lt;<span class="code-snippet__class"><span class="code-snippet__keyword">module</span>&gt;&#123;应用<span class="code-snippet__title">Code</span>&#125;-<span class="code-snippet__title">service</span>&lt;/<span class="code-snippet__title">module</span>&gt;</span></span></code><code><span class="code-snippet_outer">    &lt;<span class="code-snippet__class"><span class="code-snippet__keyword">module</span>&gt;&#123;应用<span class="code-snippet__title">Code</span>&#125;-<span class="code-snippet__title">start</span>&lt;/<span class="code-snippet__title">module</span>&gt;</span></span></code><code><span class="code-snippet_outer">&lt;<span class="code-snippet__regexp">/modules&gt;</span></span></code></pre>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">的确，Module和Component这两个概念很相近，很容易造成混淆。比如，在</span>
<span style="box-sizing: inherit;font-weight: bold;text-decoration: underline;text-underline-position: under;font-size: 15px;letter-spacing: 1px;">StackOverflow上有一个提问</span>
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">，就是问Module和Component之间区别的。获得最高赞的答案是通过Scope来区分的。</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-style: italic;font-size: 15px;letter-spacing: 1px;">The terms are similar. I generally think of a "module" as being larger than a "component". A component is a single part, usually relatively small in scope.</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-style: italic;font-size: 15px;letter-spacing: 1px;">「这两个概念类似，我通常认为“模块”比“组件”更大。组件是一个单独的部分，通常范围相对较小。」</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;text-align: left;">
<span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;color: rgba(25, 26, 31, 0.9);">（StackOverflow地址：https://softwareengineering.stackexchange.com/questions/178927/is-there-a-difference-between-a-component-and-a-module?spm=ata.21736010.0.0.48807536xgth68）</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="109:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="109:0" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">这个回答和我的直觉反应是一致的，即Module比Package要大。根据以上信息，我在此对Module和Package进行一下定义说明，在本文中，都会遵照如下的定义。- </span><span data-cangjie-key="109:86" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="109:86" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">模块（Module）</span><span data-cangjie-key="109:96" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="109:96" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">：和Maven中Module定义保持一致，简单理解就是Jar。- </span><span data-cangjie-key="109:131" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="109:131" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">包（Package）</span><span data-cangjie-key="109:141" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="109:141" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">：和UML中的定义类似，简单理解就是一个文件夹。</span></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;letter-spacing: 1px;font-size: 15px;color: rgba(25, 26, 31, 0.9);"><br></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">一个Moudle通常是由多个Package组成的，其关系如下图所示：</span>
</section>
<section style="margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;text-align: center;">
<img class="rich_pages wxw-img lazy" data-croporisrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/9c60cd1f-d4bc-498a-b008-b0c947f36489.jpg" data-cropx1="30" data-cropx2="530" data-cropy1="13" data-cropy2="349" data-imgfileid="503042078" data-ratio="0.6686626746506986" data-type="jpeg" data-w="501" referrerpolicy="no-referrer" src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/7bde28db-0d81-4d94-b7a5-48a794f593ed.jpg" style="height: 336px;width: 500px;">
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<span id="OSC_h4_4"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">典型的业务系统</span></strong></span></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">典型的业务系统都需要：</span></p>
<ol class="list-paddingleft-1" style="width: 577.422px;letter-spacing: 0.578px;text-wrap: wrap;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">接收request，响应response；</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">做业务逻辑处理，像校验参数，状态流转，业务计算等等；</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">和外部系统有联动，像数据库，微服务，搜索引擎等；</span></p></li>
</ol>
<p style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;"><strong><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">如何正确的组织这些业务代码，让他们处于自身该存在的位置，就是我们今天要聊的话题。</span></strong></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<section style="margin-bottom: 0px;outline: 0px;box-sizing: inherit;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgba(25, 26, 31, 0.9);font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", Arial, sans-serif;font-size: 16px;text-align: center;visibility: visible;line-height: normal;">
<span style="outline: 0px;font-size: 15px;letter-spacing: 1px;visibility: visible;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042076" data-ratio="0.3056872037914692" data-s="300,640" data-type="png" data-w="422" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/c2180234-fd18-4cab-aab2-7e9f3070e67c.png" style="outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible !important;width: 117px !important;"></span>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(34, 34, 34);text-align: center;visibility: visible;line-height: normal;">
<span style="outline: 0px;font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 18px;letter-spacing: 1px;visibility: visible;color: rgb(0, 17, 255);">常见的工程结构（理论部分）</span>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(34, 34, 34);text-align: center;visibility: visible;line-height: normal;">
<br>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(34, 34, 34);text-align: justify;visibility: visible;line-height: normal;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">同样，好的应用架构，不管是六边形架构、洋葱圈架构、整洁架构等,</span>
<strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">都提倡以业务为核心，解耦外部依赖，分离业务复杂度和技术复杂度</span></strong>
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">。</span>
</section>
<blockquote style="box-sizing: inherit;margin-top: 0px;margin-bottom: 0px;margin-left: 2px;padding-top: 0px;padding-left: 11px;opacity: 0.5;border-left-width: 4px;border-left-color: rgb(217, 219, 221);color: rgb(64, 64, 64);font-family: "zh quote", "Helvetica Neue", -apple-system, "PingFang SC", "Microsoft YaHei", STHeiti, Helvetica, Arial, sans-serif, "Apple Color Emoji";font-size: 14.6667px;letter-spacing: normal;text-align: start;white-space: pre-wrap;background-color: rgb(255, 255, 255);">
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">简单理解下业务复杂度和技术复杂度的概念：</span>
</section>
</blockquote>
<blockquote style="box-sizing: inherit;margin-top: 0px;margin-bottom: 0px;margin-left: 2px;padding-top: 0px;padding-left: 11px;opacity: 0.5;border-left-width: 4px;border-left-color: rgb(217, 219, 221);color: rgb(64, 64, 64);font-family: "zh quote", "Helvetica Neue", -apple-system, "PingFang SC", "Microsoft YaHei", STHeiti, Helvetica, Arial, sans-serif, "Apple Color Emoji";font-size: 14.6667px;letter-spacing: normal;text-align: start;white-space: pre-wrap;background-color: rgb(255, 255, 255);">
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">对于一个最简单的钱包扣钱的user case来说</span>
</section>
</blockquote>
<blockquote style="box-sizing: inherit;margin-top: 0px;margin-bottom: 0px;margin-left: 2px;padding-top: 0px;padding-left: 11px;opacity: 0.5;border-left-width: 4px;border-left-color: rgb(217, 219, 221);color: rgb(64, 64, 64);font-family: "zh quote", "Helvetica Neue", -apple-system, "PingFang SC", "Microsoft YaHei", STHeiti, Helvetica, Arial, sans-serif, "Apple Color Emoji";font-size: 14.6667px;letter-spacing: normal;text-align: start;white-space: pre-wrap;background-color: rgb(255, 255, 255);">
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">业务复杂度：钱包扣钱时的规则（eg：不能扣成负值）就是业务复杂度</span>
</section>
</blockquote>
<blockquote style="box-sizing: inherit;margin-top: 0px;margin-bottom: 0px;margin-left: 2px;padding-top: 0px;padding-left: 11px;opacity: 0.5;border-left-width: 4px;border-left-color: rgb(217, 219, 221);color: rgb(64, 64, 64);font-family: "zh quote", "Helvetica Neue", -apple-system, "PingFang SC", "Microsoft YaHei", STHeiti, Helvetica, Arial, sans-serif, "Apple Color Emoji";font-size: 14.6667px;letter-spacing: normal;text-align: start;white-space: pre-wrap;background-color: rgb(255, 255, 255);">
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">技术复杂度：钱包最终是如何存储的，是用mysql还是lindorm</span>
</section>
</blockquote>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">应用架构的本质(核心)</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">，就是要从繁杂的业务系统中提炼出共性，找到解决业务问题的最佳共同模式，为开发人员提供统一的认知，治理混乱。帮助应用系统“从混乱到有序”，</span><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">物流技术部的工程脚手架</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">就是为此而生，其核心职责就是定义良好的应用结构，提供最佳实践。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<span id="OSC_h4_5"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">分层模式</span></strong></span></h4>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">分层是一种常见的根据系统中的角色（职责拆分）和组织代码单元的常规实践。常见的分层结构如下图所示：</span></p>
<p style="margin-top: 8px;line-height: 1.75em;text-align: center;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-imgfileid="503041970" data-ratio="1.2418952618453865" data-type="other" data-w="401" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/fdc1f6dc-a414-495a-b875-65bdab468d4e.jpg"></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<span id="OSC_h4_6"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">CQRS模式(命令和查询责任分离)</span></strong></span></h4>
<h3 data-cangjie-key="172" data-cangjie-leaf-block="true" data-type="heading-3" style="box-sizing: inherit;margin-top: 16px;margin-bottom: 5px;font-weight: 700;color: rgb(34, 35, 40);font-size: 14pt;line-height: 1.7;font-family: "zh quote", "Helvetica Neue", -apple-system, "PingFang SC", "Microsoft YaHei", STHeiti, Helvetica, Arial, sans-serif, "Apple Color Emoji";letter-spacing: normal;white-space: pre-wrap;background-color: rgb(255, 255, 255);text-align: left;"></h3>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">CQRS(Command Query Rsponsibility Segregation，命令查询分离)</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">其基本思想在于，任何一个对象的方法可以分为两大类：* 命令(Command):不返回任何结果(void)，但会改变对象的状态。* 查询(Query):返回结果，但是不会改变对象的状态，对系统没有副作用。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503041971" data-ratio="0.8719806763285024" data-type="other" data-w="828" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/05ec1d42-e967-428a-88fd-74f9ad2e6c3c.jpg"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: justify;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<span id="OSC_h4_7"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">六边形架构</span></strong></span></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">六边形架构是Alistair Cockburn在2005年提出，解决了传统的分层结构所带来的问题，实际上它也是一种分层架构，只不过不是上下，而是变成了内部和外部（如下图所示）。</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-imgfileid="503041978" data-ratio="0.5859613428280773" data-type="other" data-w="983" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/a929931a-4713-46c2-9a7d-5227f819e50c.jpg"></span>
</section>
<p style="outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;visibility: visible;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: justify;margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">六边形架构又称为端口-适配器架构，这个名字更容器理解。六边形架构将系统分为内部（内部六边形）和外部，内部代表了应用的业务逻辑，外部代表应用的驱动逻辑、基础设施或其他应用。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<section style="margin-bottom: 8px;line-height: 1.75em;margin-top: 8px;">
<span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="203:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="203:0" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">适配器分为两种类型（如下图所示），左侧代表 UI 的适配器被称为</span><span data-cangjie-key="203:32" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="203:32" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">主动适配器（Driving Adapters）</span><span data-cangjie-key="203:55" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="203:55" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">，因为是它们发起了对应用的一些操作。而右侧表示和后端工具链接的适配器，被称为</span><span data-cangjie-key="203:93" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="203:93" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">被动适配器（Driven Adapters）</span><span data-cangjie-key="203:115" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="203:115" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">，因为它们只会对主适配器的操作作出响应。</span></span>
</section>
<section style="margin-bottom: 8px;line-height: 1.75em;margin-top: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span>
</section>
<section style="margin-bottom: 8px;line-height: 1.75em;text-align: center;margin-top: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-imgfileid="503041979" data-ratio="0.6032863849765259" data-type="other" data-w="852" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/65ea2855-2026-4c61-a8fe-7ed93622262d.jpg"></span>
</section>
<section style="outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;visibility: visible;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: justify;margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<span id="OSC_h4_8"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">洋葱圈架构</span></strong></span></h4>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">洋葱架构与六边形架构有着相同的思路，它们都通过编写适配器代码将应用核心从对基础设施的关注中解放出来，避免基础设施代码渗透到应用核心之中。这样应用使用的工具和传达机制都可以轻松地替换，可以一定程度地避免技术、工具或者供应商锁定。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">不同的是洋葱架构还告诉我们，企业应用中存在着不止两个层次，它在业务逻辑中加入了一些在领域驱动设计的过程中被识别出来的层次（Application，Domain Service，Domain model，Infrastructure等）</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">另外，它还有着脱离真实基础设施和传达机制应用仍然可以运行的便利，这样可以使用 mock 代替它们方便测试。</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;text-align: center;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503041980" data-ratio="0.7367021276595744" data-type="other" data-w="752" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/49021b5e-1817-4714-a414-96acb32c49ff.jpg"></span>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">在洋葱架构中，明确规定了依赖的方向：</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">外层依赖内层；</span></p></li>
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">内层对外层无感知。</span></p></li>
</ol>
<p style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;visibility: visible;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: justify;margin-top: 8px;line-height: 1.75em;"><br></p>
<section style="margin-bottom: 0px;text-wrap: wrap;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: center;line-height: normal;">
<img class="rich_pages wxw-img lazy" data-imgfileid="503042077" data-ratio="0.3056872037914692" data-s="300,640" data-type="png" data-w="422" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/f3e8a852-7090-467f-aa4f-7254eb06b14a.png" style="outline: 0px;letter-spacing: 0.544px;font-size: 14px;visibility: visible !important;width: 117px !important;">
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(100, 99, 99);font-size: 15px;text-align: center;line-height: normal;">
<span style="outline: 0px;font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 1px;font-size: 18px;color: rgb(0, 17, 255);">应用架构的核心</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">纵观上面介绍的所有应用架构，我们可以发现一个共同点，就是“<strong>核心业务逻辑和技术细节分离</strong>”。</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-croporisrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/459aa1ff-6a4e-4471-aa31-07f2f6966414.jpg" data-cropx1="73.77162629757785" data-cropx2="1016.6089965397924" data-cropy1="39.58477508650519" data-cropy2="662.1453287197232" data-imgfileid="503042080" data-ratio="0.6606574761399788" data-type="jpeg" data-w="943" referrerpolicy="no-referrer" src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/3ebfee95-a24f-47bd-b474-dc96ad4f3a87.jpg" style="width: 524px;height: 346px;"></span>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">是的，</span><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">六边形架构、洋葱圈架构的核心职责就是要做核心业务逻辑和技术细节的分离和解耦</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">试想一下，业务逻辑和技术细节糅杂在一起的情况，所有的代码都写在ServiceImpl里面，前几行代码是做validation的事，接下来几行是做convert的事，然后是几行业务处理逻辑的代码，穿插着，我们需要通过RPC或者DAO获取更多的数据，拿到数据后，又是几行convert的代码，在接上一段业务逻辑代码，然后还要落库，发消息.....等等。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">再简单的业务，按照上面这种写代码的方式，都会变得复杂，难维护。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">因此，我认为应用架构的核心使命就是要</span><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">分离业务逻辑和技术细节</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">。</span><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">让核心业务逻辑可以反映领域模型和领域应用</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">，可以复用，可以很容易被看懂。</span><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">让技术细节在辅助实现业务功能的同时，可以被替换</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">。</span></p>
<section style="margin-top: 8px;margin-bottom: 8px;letter-spacing: 0.578px;text-wrap: wrap;line-height: 1.75em;">
<br>
</section>
<section style="margin-bottom: 0px;text-wrap: wrap;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: center;line-height: normal;">
<img class="rich_pages wxw-img lazy" data-imgfileid="503042084" data-ratio="0.328125" data-s="300,640" data-type="png" data-w="256" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/d423be6a-24b5-4179-bfb2-a4fc1aa1748b.png" style="outline: 0px;letter-spacing: 0.544px;font-size: 16px;visibility: visible !important;width: 122px !important;">
</section>
<section style="margin-bottom: 0px;text-wrap: wrap;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;background-color: rgb(255, 255, 255);color: rgb(100, 99, 99);font-size: 15px;text-align: center;line-height: normal;">
<span style="outline: 0px;color: rgb(0, 17, 255);font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;text-wrap: wrap;background-color: rgb(255, 255, 255);">如何正确的进行工程划分？</span>
</section>
<section style="margin-bottom: 0px;text-wrap: wrap;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);line-height: 1.75em;margin-top: 8px;">
<br>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">这些应用架构思想虽然很好，但我们很多同学还是“<strong>不讲Co德，明白了很多道理，可还是过不好这一生</strong>”。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">所以我们接下来聊聊这个偏工程实践的话题。</span></p>
<section style="margin-bottom: 0px;text-wrap: wrap;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);line-height: 1.75em;margin-top: 8px;">
<br>
</section>
<span id="OSC_h4_9"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">业务工程中最基本的Module划分</span></strong></span></h4>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;"><br></span></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">上文提到了Moudle和包之间的关系，我们有个基本共识，Module比Package（包）要大一些。那我们基本的分层结构又应该是怎么样的呢，这里列两种业务工程中最常见的Module之间的依赖关系：</span>
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_10"></span><h4 data-cangjie-key="273" data-cangjie-leaf-block="true" data-type="heading-4" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;color: rgb(0, 17, 255);">非依赖倒置下的Module分层</span></h4></li>
</ul>
<section style="text-align: center;margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;"><img class="rich_pages wxw-img lazy" data-imgfileid="503041991" data-ratio="1.1523046092184368" data-type="other" data-w="499" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/749413df-dbfc-4d07-b658-1fc03b2dafdd.jpg"></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_11"></span><h4 data-cangjie-key="286" data-cangjie-leaf-block="true" data-type="heading-4" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;color: rgb(0, 17, 255);">依赖倒置（DIP）下的Module分层（推荐）</span></h4></li>
</ul>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;text-align: center;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042001" data-ratio="1.2995594713656389" data-type="other" data-w="454" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/d3163f4a-3913-4082-bc7d-6b28aad6c6e6.jpg"></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">依赖倒置（DIP）:</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">简单说依赖倒置就是你不要直接依赖我，你和我都同时依赖一个接口（所以有时候也叫面向接口的编程），这样我们之间就解耦了，依赖和被依赖方都可以自由改动了。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;font-size: 15px;letter-spacing: 1px;color: rgb(0, 17, 255);">依赖倒置下的Module分层的好处</span></p></li>
</ul>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span data-cangjie-key="310:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="310:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span data-cangjie-key="310:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="310:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">Domain层会变得更加纯粹，完全摆脱了对技术细节</span><span data-cangjie-key="310:25" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="310:25" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">（以及技术细节带来的复杂度）的依赖，只需要安心处理业务逻辑就好（我们经常说的<strong>核心业务逻辑</strong>稳定其实就是Domain层的稳定，上文中的Domain层完全依赖于接口和内部的模型，屏蔽了技术细节，如果我们更换技术组件，也只需要更换技术细节的实现即可）</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span data-cangjie-key="316:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="316:0" style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">并行开发</span><span data-cangjie-key="316:4" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="316:4" style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">：只要在Domain和Infrastructure约定好接口，可以有两个同学并行编写Domain和Infrastructure的代码</span><br></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span data-cangjie-key="319:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="319:0" style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">可测试性</span><span data-cangjie-key="319:4" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="319:4" style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">：没有任何依赖的Domain里面都是POJO的类，单元测试将会变得非常方便，也非常适合TDD的开发。</span><br></p></li>
</ol>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<span id="OSC_h5_12"></span>
<h5 data-cangjie-key="320" data-cangjie-leaf-block="true" data-type="heading-5" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">分层职责</span></h5>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">1.</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">适配层（Adapter Layer）：负责对前端展示（web，wireless，wap）的路由和适配，对于传统B/S系统而言，<strong>adapter就相当于MVC中的controller</strong>；</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><strong>用户展现信息以及解释用户命令</strong></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><strong>大部分工程为start模块</strong></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">2.</span><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">应用层/应用服务层（Application Layer）：主要负责获取输入，组装上下文，参数校验，调用领域层做业务处理，如果需要的话，发送消息通知等。层次是开放的</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><strong>应用层也可以绕过领域层，直接访问基础实施层(CQRS模式中对于查询的说法就是可以绕过DomainModel之间查询数据)</strong>；</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">很薄的一层，用来协调应用的活动。它不包含业务逻辑</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><strong>同样的一个Service应可被不同的Adapter（Web、远程调用、异步消息）复用）</strong>。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><strong>适合处理事务、高层次日志(oplog)、安全（权限）</strong></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">3.</span><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">领域层（Domain Layer）：主要是封装了核心业务逻辑，并通过领域服务（Domain Service）和领域对象（Domain Entity）的方法对App层提供业务实体和业务逻辑计算。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span data-cangjie-key="325:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="325:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><strong>领域是应用的核心，不依赖任何其他层次</strong></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 8px;line-height: 1.4;transform: translateY(-4.5%);font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">○</span><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通常每一个聚合（aggregate）一个package。聚合包含实体（entity），值对象（value object），领域事件（domain event），资源库（repository，仅接口）接口和一些工厂（Factory）。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">4.</span><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">基础实施层（Infrastructure Layer）：主要负责技术细节问题的处理，比如数据库的CRUD、搜索引擎、文件系统、分布式服务的RPC等。此外，领域防腐的重任也落在这里，外部依赖需要通过防腐层（Anti-Corruption） 实现的转义处理，才能被上面的App层和Domain层使用。</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<span id="OSC_h4_13"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">如果我要提供一个SDK对外提供服务怎么办？</span></strong></span></h4>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042002" data-ratio="0.9544764795144158" data-type="other" data-w="659" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/78d059c9-4ae5-4089-aca0-5f8422ee37f4.jpg"></span>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">Module的定义应该遵循自身业务需求<strong>（如无必要勿增实体）</strong></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">上文中如果需要一个api包则增加一个API Module包即可</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><strong><span style="color: rgba(25, 26, 31, 0.9);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;caret-color: transparent;">这里的client包不要依赖Domain,这会引入大量无关依赖，对包的使用者造成困扰</span></strong></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<span id="OSC_h4_14"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;margin-bottom: 8px;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">包结构的划分</span></strong></span></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">分层是属于大粒度的职责划分，太粗，我们有必要往下再down一层，细化到包结构的粒度，才能更好的指导我们的工作。</span>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="font-size: 15px;letter-spacing: 1px;"><span data-cangjie-key="386:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="386:0" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">还是拿一堆玩具举例子，分层类似于拿来了一个架子，分包类似于在每一层架子上又放置了多个收纳盒。</span><span data-cangjie-key="386:46" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="386:46" style="box-sizing: inherit;font-weight: bold;color: rgba(25, 26, 31, 0.9);">所谓的内聚，就是把功能类似的玩具放在一个盒子里，这样可以让应用结构清晰，极大的降低系统的认知成本和维护成本</span><span data-cangjie-key="386:99" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="386:99" style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">。</span></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;text-align: center;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042003" data-ratio="0.2898148148148148" data-type="other" data-w="1080" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/d538f5d3-154d-43a4-a169-3328b83b9ff5.jpg"></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">那么，对于一个后端应用来说，应该需要哪些收纳盒。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;text-align: center;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-croporisrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/86cfb0f7-2701-4827-ad31-6c79eaf3d889.jpg" data-cropx1="29.420415224913498" data-cropx2="870.2249134948097" data-cropy1="80.51903114186851" data-cropy2="551.2456747404843" data-imgfileid="503042081" data-ratio="0.5600475624256838" data-type="jpeg" data-w="841" referrerpolicy="no-referrer" src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/50319171-c58a-43c5-bd57-181b256d2a91.jpg" style="width: 543px;height: 304px;"></span></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">各个包结构的简要功能描述，如下表所示：</span>
</section>
<section style="text-align: center;margin-bottom: 8px;margin-top: 8px;line-height: 1.75em;">
<img class="rich_pages wxw-img lazy" data-galleryid data-imgfileid="503042083" data-ratio="1.103305785123967" data-s="300,640" data-type="png" data-w="726" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/76aa5bfd-ee6e-4774-8761-982379ec70f0.png" style>
</section>
<section style="margin-bottom: 8px;margin-top: 8px;line-height: 1.75em;">
<br>
</section>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_15"></span><h4 data-cangjie-key="874" data-cangjie-leaf-block="true" data-type="heading-4" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgb(0, 17, 255);">你可能会有疑问，为什么Domain的model是可选的？</span><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"></span></h4></li>
</ul>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">因为是应用架构，不是DDD架构。对于应用架构来说：<strong>无有必要勿增实体</strong>。领域模型对设计能力要求很高，没把握用好，一个错误的抽象还不如不抽象，宁可不要用，也不要滥用，<strong>不要为了DDD而DDD</strong>。</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">问题的关键是要看，新增的模型没有给你带来收益。比如<strong>有没有帮助系统解耦，有没有提升业务语义表达能力的提升，有没有提升系统的可维护性和可测性等等</strong>。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">模型虽然可选，但DDD的思想是一定要去学习和贯彻的，特别是统一语言、边界上下文、<strong>防腐层的思想</strong>，值得深入学习，仔细体会。实际上，应用架构里面的很多设计思想都来自于DDD。其中就包括领域包的设计。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">前面的包定义，都是功能维度的定义。为了兼顾领域维度的内聚性，我们有必要对包结构进行一下微调，即<strong>顶层包结构应该是按照领域划分，让领域内聚</strong>。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">也就是说，我们要综合考虑功能和领域两个维度包结构定义。<strong>按照领域和功能两个维度分包策略</strong>，最后呈现出来的，是如下图所示的顶层包节点是领域名称，领域之下，再按功能划分包</span></p>
<p style="margin-bottom: 8px;margin-top: 8px;line-height: 1.75em;"><span style="font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);letter-spacing: 1px;"><br></span></p>
<p style="margin-bottom: 8px;margin-top: 8px;line-height: 1.75em;text-align: center;"><span style="font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-croporisrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/32124086-f1bd-4c9c-9c9c-2bbe4c3b78e7.jpg" data-cropx1="0" data-cropx2="1116" data-cropy1="90.74740484429066" data-cropy2="843.7577854671281" data-imgfileid="503042082" data-ratio="0.6759259259259259" data-type="jpeg" data-w="1080" referrerpolicy="no-referrer" src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/73ed6593-5145-4565-a5a4-c747195ebd23.jpg" style="width: 578px;height: 390px;"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">下图是一个例子，按照分包策略，我们在每一个Module下面首先按照领域做一个顶层划分，然后在领域内，再按照功能进行分包。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-imgfileid="503042009" data-ratio="0.5" data-type="other" data-w="1080" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/41867f9b-46b8-49e0-9564-3eb91352c744.jpg"></span></p>
<p style="margin-bottom: 8px;margin-top: 8px;line-height: 1.75em;"><br></p>
<p style="margin: 0px;text-wrap: wrap;outline: 0px;background-color: rgb(255, 255, 255);font-size: 11pt;font-family: DengXian;color: rgb(0, 0, 0);letter-spacing: normal;text-align: center;line-height: normal;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042085" data-ratio="0.328125" data-s="300,640" data-type="png" data-w="256" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/57d84e5a-add9-4bf6-8b90-09f999aec8bc.png" style="outline: 0px;color: rgb(34, 34, 34);font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible !important;width: 133px !important;"></p>
<p style="line-height: 1.75em;text-align: center;margin: 0px;"><span style="box-sizing: inherit;color: rgb(0, 17, 255);font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;text-wrap: wrap;background-color: rgb(255, 255, 255);">如何解决应用架构中的问题</span></p>
<section style="margin-top: 8px;line-height: 1.75em;text-align: justify;margin-bottom: 8px;">
<br>
</section>
<span id="OSC_h4_16"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">应用架构中如何处理解耦问题</span></strong></span></h4>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"></h4>
<section style="margin-top: 8px;line-height: 1.75em;text-align: justify;margin-bottom: 8px;">
<br>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">“<strong>高内聚，低耦合</strong>”这句话，你工作的越久，就越会觉得其有道理。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">所谓耦合就是联系的紧密程度，只要有依赖就会有耦合，不管是进程内的依赖，还是跨进程的RPC依赖，都会产生耦合。</span></strong><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">依赖不可消除，同样，耦合也不可避免。我们所能做的不是消除耦合，而是把耦合降低到可以接受的程度。在软件设计中，有大量的设计模式，设计原则都是为了解耦这一目的。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">在DDD中有一个很棒的解耦设计思想——防腐层（Anti-Corruption），简单说，就是应用不要直接依赖外域的信息，要把外域的信息转换成自己领域上下文（Context）的实体再去使用，从而实现本域和外部依赖的解耦。</span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_17"></span><h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgb(0, 17, 255);">防腐层设计在应用架构中的应用</span></h4></li>
</ul>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">我们把防腐层（Anti-Corruption）这个概念进行泛化，将数据库、搜索引擎等数据存储都列为外部依赖的范畴。利用依赖倒置，统一使用防腐层（Anti-Corruption）/Repository等接口来实现业务领域和外部依赖的解耦。</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);">其实现方式如下图所示，主要是在Domain层定义防腐层（Anti-Corruption）/Repository等接口，然后在Infrastructure提供防腐层（Anti-Corruption） 接口的实现。</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-croporisrc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/0062cf11-1b19-435b-a846-fc07d501a2ec.jpg" data-cropx1="32.77162629757785" data-cropx2="1683.2698961937717" data-cropy1="32.77162629757785" data-cropy2="723.955017301038" data-imgfileid="503042087" data-ratio="0.41944444444444445" data-type="jpeg" data-w="1080" referrerpolicy="no-referrer" src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/dc7e6e5c-a869-4f07-a24a-8693b7e2b068.jpg" style="width: 554px;height: 232px;"></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_18"></span><h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;font-size: 15px;letter-spacing: 1px;color: rgb(0, 17, 255);">高内聚低耦合在包划分中的体现</span></h4></li>
</ul>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">刚刚我们提到了在包划分的过程中，推荐先按照领域分包，这其实就是一种高内聚低耦合，这样做的好处有以下几方面：</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">明确这个包下面提供的类和功能应该放在一起考虑</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过包的可见性现在自身领域服务(功能)对外的可见性（重点）</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">a.写java的同学经常会给领域模型DomainModel上直接加上Setter方法，这样会比较方便构造领域对象，但是这样的做法其实违反了开闭原则，意味着你的领域对象中的所有属性对外都是暴露的，可以直接通过set的方式而不是通过领域对象提供的方法来进行变更，这对领域对象的稳定性来说很不友好</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;">b.</span>
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过包的可见性来暴露自身想暴露的能力</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">这里推荐一种比较好的做法:</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">对于setter方法以及内部调用的方法设置为</span>
<strong><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">包可见（package private）</span></strong>
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;"></span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过构造函数/Factory(复杂的聚合根)创建领域对象</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<span id="OSC_h4_19"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">如何对齐文中的概念和实际业务中的Module?</span></strong></span></h4>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">由于各个团队之间自身规范的问题以及建项目的同学自身对应用架构的理解不同，你可能会发现如下几种情况：</span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;font-weight: bold;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">业务系统中的Module层数和文中描述的不同</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">业务复杂度决定了包的层级，对于简单的web系统，单module其实更能降低架构复杂度</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span data-cangjie-key="972:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="972:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgb(0, 0, 0);">拆分粒度不同，有些工程可能会拆分出类似Infrastruct-client(</span><strong><span data-cangjie-key="972:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="972:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgb(0, 0, 0);">对应上文中的防腐层（Anti-Corruption</span></strong><span data-cangjie-key="972:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="972:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgb(0, 0, 0);">）Interface)这样的Module</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">业务诉求不同：有些业务系统并不需要提供API，而是通过DTS/Controller驱动业务，自然也就不需要API Module</span></p></li>
</ol>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;font-weight: bold;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">业务系统中的Module命名和文中描述不同</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">每个人对module的命名问题，实际还是要看这个module承载的业务职责</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span data-cangjie-key="984:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="984:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgb(0, 0, 0);">模块的职责不同，比方说</span><span style="box-sizing: inherit;font-weight: bold;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">对外提供的富客户端一般以Client命名，接口包一般就叫API</span><span data-cangjie-key="984:42" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="984:42" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;color: rgb(0, 0, 0);">了</span></p></li>
</ol>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;font-weight: bold;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">业务系统中Module的依赖关系和文中不同</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">有没有可能是分层太多倒置后来的同学也搞不清楚该怎么依赖了，导致的错误依赖</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">文中也提供了好几种依赖，就像地心说和日心说一样，对于应用结构的认识是有一个过程的</span></p></li>
</ol>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;display: inline-block;margin-right: 11.7656px;line-height: 1.4;font-size: 15px;letter-spacing: 1px;font-family: Arial !important;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;font-weight: bold;color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;">业务系统中的包划分和文中不同</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">很多业务系统直接按照功能分包了，比如repository放一起(我认为对于实现来说是ok的，对于领域模型来说还是要有领域的概念)</span></p></li>
</ol>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></p>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h3_20"></span><h3 data-cangjie-key="1000" data-cangjie-leaf-block="true" data-type="heading-3" style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;font-size: 15px;letter-spacing: 1px;color: rgb(0, 17, 255);">那么如何找到这个工程目前的工程规范呢？</span></h3></li>
</ul>
<h3 data-cangjie-key="1000" data-cangjie-leaf-block="true" data-type="heading-3" style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></h3>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><span id="OSC_h3_21"></span><h3 data-cangjie-key="1000" data-cangjie-leaf-block="true" data-type="heading-3" style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">如果有工程结构的文档，优先阅读（省时间）</h3></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">找一个Use Case，从入口侧去看文中的业务开发中涉及到的业务逻辑写在了哪个包中</span></p></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">注：Use Case是《架构整洁之道》里面的术语，简单理解就是响应一个Request的处理过程</span>
</section>
<section style="margin-bottom: 8px;">
<span data-cangjie-key="1014:0" data-cangjie-leaf="true" data-testid="1014:0" style="box-sizing: inherit;"><br></span>
</section>
<span id="OSC_h4_22"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;margin-bottom: 8px;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">如果业务代码中的应用架构不合理，你有自己的想法怎么办？</span></strong></span></h4>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;"><br></span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">工程刚开始搭建阶段：</span><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">大家团队内进行讨论，并产出应用架构图，统一领域语言：module分布、包命名规范、类命名规范等，再进行开发</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">工程不复杂，且大家都认可新的应用架构：</span><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">拉分支修改，改造后进行功能的回归测试，组内review完没问题将变更合并入主干分支</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="color: rgb(0, 0, 0);font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">工程比较复杂或者你只是想让你这部分代码符合你的规范：</span><span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">并不建议这样做，对于一个应用工程来说，不同代码风格往往比合理的工程架构更致命，会导致工程结构混乱，大家理解困难，一个统一的工程规范远比合理更重要</span></p></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);text-align: center;line-height: normal;">
<img class="rich_pages wxw-img lazy" data-imgfileid="503042086" data-ratio="0.328125" data-s="300,640" data-type="png" data-w="256" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/cb72549b-6a33-43ff-9174-1575cd6b8307.png" style="outline: 0px;color: rgb(51, 51, 51);font-size: 20px;font-weight: bold;letter-spacing: 0.578px;visibility: visible !important;width: 134px !important;">
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(100, 99, 99);font-size: 15px;text-align: center;line-height: normal;">
<span style="outline: 0px;font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 1px;font-size: 18px;color: rgb(0, 17, 255);">如何编写业务代码？</span>
</section>
<p style="margin-top: 8px;outline: 0px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<span id="OSC_h4_23"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;outline: 0px;letter-spacing: 0.544px;text-wrap: wrap;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">DDD下业务代码的组织方式</span></strong></span></h4>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_24"></span><h4 data-cangjie-key="1052" data-cangjie-leaf-block="true" data-type="heading-4" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;color: rgb(0, 17, 255);">“写操作”在DDD中的实现3种场景，分别是</span></h4></li>
</ul>
<section style="margin-bottom: 8px;text-align: justify;">
<span style="box-sizing: inherit;color: rgb(51, 51, 51);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><span id="OSC_h4_25"></span><h4 data-cangjie-key="1052" data-cangjie-leaf-block="true" data-type="heading-4" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: justify;"><span style="color: rgb(51, 51, 51);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过聚合根完成业务请求，这是DDD完成业务请求的典型方式</span></h4></li>
<li>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: justify;">
<span style="color: rgb(51, 51, 51);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过Factory完成聚合根的创建</span>
</section></li>
<li><p style="margin-top: 8px;line-height: 1.75em;text-align: justify;margin-bottom: 8px;"><span style="color: rgb(51, 51, 51);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过DomainService完成业务请求</span></p></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><br></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-backh="288" data-backw="578" data-imgfileid="503042088" data-ratio="0.49722222222222223" data-type="other" data-w="1080" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/8939ad18-3832-4d6d-a27f-74a94709eb8b.jpg" style="width: 100%;height: auto;"></span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h4_26"></span><h4 data-cangjie-key="1071" data-cangjie-leaf-block="true" data-type="heading-4" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;color: rgb(0, 17, 255);">读操作，同样给出了3种方式</span></h4></li>
</ul>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">基于领域模型的读操作(读写操作糅合在了一起，不推荐)</span></p></li>
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">基于数据模型的读操作(绕过聚合根和资源库，直接返回数据，推荐)</span></p></li>
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">CQRS(读写操作分别使用不同的数据库，比较重)</span></p></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="color: rgb(0, 0, 0);font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">（图中的ReadModel可以理解为DTO）</span>
</section>
<p style="margin-top: 8px;line-height: 1.75em;text-align: center;margin-bottom: 8px;"><span style="letter-spacing: 1px;font-size: 15px;box-sizing: inherit;color: rgba(25, 26, 31, 0.9);"><img class="rich_pages wxw-img lazy" data-imgfileid="503042089" data-ratio="0.6407407407407407" data-type="other" data-w="1080" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/19fe59c6-305f-47e9-ab18-3b7054b9190f.jpg"></span></p>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<ul class="list-paddingleft-1" style="list-style-type: disc;">
<li style="color: rgb(0, 17, 255);"><span id="OSC_h3_27"></span><h3 data-cangjie-key="1093" data-cangjie-leaf-block="true" data-type="heading-3" style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;color: rgb(0, 17, 255);">对于业务代码来说，怎么提炼出业务逻辑和技术细节？</span></h3></li>
</ul>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">对Use Case进行过程分解</span></p></li>
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">对象模型建设</span></p></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;text-align: center;">
<img class="rich_pages wxw-img lazy" data-backh="289" data-backw="578" data-imgfileid="503042090" data-ratio="0.5" data-type="other" data-w="1080" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/7e7560a4-ca89-42f8-9c49-bbf2685d179a.jpg" style="width: 100%;height: auto;">
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;">举个例子，在上架过程中，有一个校验是检查库存的，其中对于组合品（CombineBackOffer）其库存的处理会和普通品不一样。原来的代码是这么写的：</span></p>
<section class="code-snippet__fix code-snippet__js">
<pre class="code-snippet__js" data-lang="typescript"><code><span class="code-snippet_outer">boolean isCombineProduct = supplierItem.getSign().isCombProductQuote();</span></code><code><span class="code-snippet_outer"><br></span></code><code><span class="code-snippet_outer">// supplier.usc warehouse needn't check</span></code><code><span class="code-snippet_outer">if (WarehouseTypeEnum.isAliWarehouse(supplierItem.getWarehouseType())) &#123;</span></code><code><span class="code-snippet_outer">// quote warehosue check</span></code><code><span class="code-snippet_outer">if (CollectionUtil.isEmpty(supplierItem.getWarehouseIdList()) &amp;&amp; !isCombineProduct) &#123;</span></code><code><span class="code-snippet_outer">    throw ExceptionFactory.makeFault(ServiceExceptionCode.SYSTEM_ERROR, "亲，不能发布Offer，请联系仓配运营人员，建立品仓关系！");</span></code><code><span class="code-snippet_outer">&#125;</span></code><code><span class="code-snippet_outer">// inventory amount check</span></code><code><span class="code-snippet_outer">Long sellableAmount = 0L;</span></code><code><span class="code-snippet_outer">if (!isCombineProduct) &#123;</span></code><code><span class="code-snippet_outer">    sellableAmount = normalBiz.acquireSellableAmount(supplierItem.getBackOfferId(), supplierItem.getWarehouseIdList());</span></code><code><span class="code-snippet_outer">&#125; else &#123;</span></code><code><span class="code-snippet_outer">    //组套商品</span></code><code><span class="code-snippet_outer">    OfferModel backOffer = backOfferQueryService.getBackOffer(supplierItem.getBackOfferId());</span></code><code><span class="code-snippet_outer">    if (backOffer != null) &#123;</span></code><code><span class="code-snippet_outer">        sellableAmount = backOffer.getOffer().getTradeModel().getTradeCondition().getAmountOnSale();</span></code><code><span class="code-snippet_outer">    &#125;</span></code><code><span class="code-snippet_outer">&#125;</span></code><code><span class="code-snippet_outer">if (sellableAmount &lt; 1) &#123;</span></code><code><span class="code-snippet_outer">    throw ExceptionFactory.makeFault(ServiceExceptionCode.SYSTEM_ERROR, "亲，实仓库存必须大于0才能发布，请确认已补货.\r[id:" + supplierItem.getId() + "]");</span></code><code><span class="code-snippet_outer">&#125;</span></code><code><span class="code-snippet_outer">&#125;</span></code></pre>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="color: rgb(0, 0, 0);letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;">然而，如果我们在系统中引入领域模型之后，其代码会简化为如下：</span><span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">﻿</span></p>
<section class="code-snippet__fix code-snippet__js">
<pre class="code-snippet__js" data-lang="javascript"><code><span class="code-snippet_outer">if(backOffer.isCloudWarehouse())&#123;</span></code><code><span class="code-snippet_outer">    return;</span></code><code><span class="code-snippet_outer">&#125;</span></code><code><span class="code-snippet_outer"><br></span></code><code><span class="code-snippet_outer">if (backOffer.isNonInWarehouse())&#123;</span></code><code><span class="code-snippet_outer">    throw new BizException("亲，不能发布Offer，请联系仓配运营人员，建立品仓关系！");</span></code><code><span class="code-snippet_outer">&#125;</span></code><code><span class="code-snippet_outer"><br></span></code><code><span class="code-snippet_outer">if (backOffer.getStockAmount() &lt; 1)&#123;</span></code><code><span class="code-snippet_outer">    throw new BizException("亲，实仓库存必须大于0才能发布，请确认已补货.\r[id:" + backOffer.getSupplierItem().getCspuCode() + "]");</span></code><code><span class="code-snippet_outer">&#125;</span></code></pre>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;">有没有发现，使用模型的表达要清晰易懂很多，而且也不需要做关于组合品的判断了，因为我们在系统中引入了更加贴近现实的对象模型（CombineBackOffer继承BackOffer），通过对象的多态可以消除我们代码中的大部分的if-else<span style="color: rgb(0, 0, 0);font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">﻿</span></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(34, 34, 34);text-align: center;line-height: normal;">
<img class="rich_pages wxw-img lazy" data-imgfileid="503042091" data-ratio="0.328125" data-s="300,640" data-type="png" data-w="256" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/f5175d58-58b3-4bdb-b562-642dcc9ac95c.png" style="outline: 0px;letter-spacing: 0.544px;visibility: visible !important;width: 136px !important;">
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(100, 99, 99);font-size: 15px;text-align: center;line-height: normal;">
<span style="outline: 0px;font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 1px;font-size: 18px;color: rgb(0, 17, 255);">常见问题</span>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><br></p>
<span id="OSC_h4_28"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">API层</span></strong></span></h4>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;"><br></span></p>
<p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">API包一般放什么内容？</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">对外暴露接口：直接代理外界需要访问的领域服务。</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">Facade模式：对Domain层的能力，基于易用性的目的，进行一定的重组；比如多个领域服务合一个API、一个领域服务拆多个API</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">对于一些通用的判断方法可以放在里面</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通用的异常类型</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通用的枚举</span></p></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<span id="OSC_h4_29"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;margin-bottom: 8px;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">Application层</span></strong></span></h4>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;font-weight: bold;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">Application层即API的设计要划分领域吗？</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">需要划分领域，细节可能和Domain层存在一些差异,由于属于顶层服务</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;font-weight: bold;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">API和Domain Service都是接口，它们的区别是什么？</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">API是暴露给外部系统，希望外部系统感知的能力；领域服务的能力仅暴露在系统内部。</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">API暴露的能力一般比领域服务少，因为领域服务还要给JobProcessor、MessageListener或其它领域服务提供服务。</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;font-weight: bold;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">分层原则（也是任何分层分域的一般准则）</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">架构解决的是变化的问题。根据子系统变化的快慢，对子系统进行分层，从而隔离变化。例如上面的基础域变化慢，业务域变化快，分开。</span>
</section></li>
</ol>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<span id="OSC_h4_30"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">Domain</span></strong></span></h4>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">为什么Domain层和Infrastructure层要依赖倒置？</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">通过依赖倒置，消除Domain层的外部依赖，完全隔离外部变化，实现自洽。</span></p></li>
</ol>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><br></p>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;font-weight: bold;letter-spacing: 1px;">Repository和防腐层（Anti-Corruption）是什么？</span></p>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">Repository就是DDD里的领域仓库，负责领域实体的生命周期管理（可以简单理解为增删改查）</span></p></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span data-cangjie-key="1204:0" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="1204:0" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;font-weight: bold;">防腐层（Anti-Corruption）</span>
<span data-cangjie-key="1204:20" data-cangjie-leaf="true" data-cangjie-mark="true" data-testid="1204:20" style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;box-sizing: inherit;">是为了隔离变化而抽象出来的概念，负责和外部系统打交道。</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">﻿</span>
<br>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;font-weight: bold;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">Repository和防腐层（Anti-Corruption）的区别是什么？</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">从代码结构上来看是一样的。如果按设计模式来解读，本质上都是Adaptor。其中，本领域充当Adaptor中的client角色。即Repository和防腐层（Anti-Corruption）的接口签名是基于本领域的需求而设计（而不是基于外部系统的签名来设计）。这也是为什么Repository和防腐层（Anti-Corruption）要按域来组织，而不是按外部系统来组织。</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">从语义上来讲，Repository偏数据，防腐层（Anti-Corruption）偏功能。这种语义区分能提升系统可维护性。</span>
</section></li>
</ol>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<span id="OSC_h4_31"></span>
<h4 data-lake-id="ca6fa186228ff7efaa653334195896c8" data-wording="true" style="margin-top: 0.5em;margin-bottom: 8px;text-wrap: wrap;outline: 0px;letter-spacing: 0.544px;color: rgb(34, 34, 34);background-color: rgb(255, 255, 255);font-family: -apple-system-font, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;visibility: visible;line-height: 1.75em;"><span style="outline: 0px;visibility: visible;letter-spacing: 1px;color: rgb(0, 17, 255);"><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">▐</span></strong><strong style="outline: 0px;visibility: visible;"><span style="outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">  </span></strong><strong style="outline: 0px;visibility: visible;"><span style="color: rgb(0, 17, 255);outline: 0px;font-family: Optima-Regular, PingFangTC-light;visibility: visible;">Infrastructure</span></strong></span></h4>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-weight: bold;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">什么决定了是放Domain层还是Infrastructure层？</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">约定：</span>
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">访问中间件/外部系统的，放基础设施层。</span>
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">领域层只放领域逻辑，从而隔离变化。</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;font-weight: bold;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;font-weight: bold;letter-spacing: 1px;">基础设施从字面上看偏基础，为什么把中间件、外部系统放这里？</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">按照洋葱圈架构的说法，这些其实都是适配器，都应该属于外部依赖的范畴</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;font-weight: bold;letter-spacing: 1px;"><br></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;font-weight: bold;letter-spacing: 1px;">Utils放哪里，是不是基础设施的一部分？</span>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">不建议：</span>
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;">如果认为工具是基础设施的一部分，则Domain层甚至API层将感知Infrastructure层，破坏了依赖单向性。</span>
</section></li>
<li>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;"><span style="font-family:Arial;">建议</span></span>
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">基础工具抽到单独的二方包；</span>
<span style="font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;">业务工具放到对应的Module。</span>
</section></li>
</ol>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="font-size: 15px;letter-spacing: 1px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;"></span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;font-size: 15px;letter-spacing: 1px;">﻿</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">回顾下整篇文章，咱们对于应用架构的混乱问题进行了总结与归纳，并给出了一些重点需要理解的内容，希望能对大家的日常开发有一些帮助。</span>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"><br></span></p>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);text-align: center;line-height: normal;">
<span style="outline: 0px;font-family: mp-quote, -apple-system-font, BlinkMacSystemFont, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 1px;"><img class="rich_pages wxw-img lazy" data-imgfileid="503042092" data-ratio="0.328125" data-s="300,640" data-type="png" data-w="256" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/ae8026bc-c1cd-4833-a97a-d6baf9d29317.png" style="outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;visibility: visible !important;width: 140px !important;"></span>
</section>
<section style="margin-bottom: 0px;outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);color: rgb(100, 99, 99);font-size: 15px;text-align: center;line-height: normal;">
<span style="outline: 0px;font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 18px;color: rgb(0, 17, 255);letter-spacing: 1px;">附录</span>
</section>
<section style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;">
<br>
</section>
<ol class="list-paddingleft-1" style="list-style-type: decimal;">
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;text-align: left;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">﻿后端开发实践系列——领域驱动设计(DDD)编码实践 - Thoughtworks洞见（地址：https://insights.thoughtworks.cn/backend-development-ddd/）﻿</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;text-align: left;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">﻿实现领域驱动设计（地址：https://book.douban.com/subject/25844633//）﻿</span></p></li>
<li><p style="margin-top: 8px;margin-bottom: 8px;line-height: 1.75em;text-align: left;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">﻿Cola-阿里巴巴开源应用架构（地址：https://github.com/alibaba/COLA）</span></p></li>
</ol>
<p style="line-height: 1.75em;text-align: justify;margin-bottom: 0px;margin-top: 0px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;"></span></p>
<section style="text-align: center;margin-top: 0px;margin-bottom: 0px;line-height: normal;">
<img class="rich_pages wxw-img lazy" data-imgfileid="503042093" data-ratio="0.3425196850393701" data-s="300,640" data-type="png" data-w="254" referrerpolicy="no-referrer" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/346aecb5-6194-4248-960e-bc26e019a878.png" style="outline: 0px;font-family: system-ui, -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;letter-spacing: 0.544px;text-wrap: wrap;background-color: rgb(255, 255, 255);width: 134px;visibility: visible !important;height: 46px;">
</section>
<section style="text-align: center;margin-top: 0px;margin-bottom: 0px;line-height: normal;">
<span style="color: rgb(0, 17, 255);font-family: -apple-system, system-ui, "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 18px;letter-spacing: 1px;text-align: center;text-wrap: wrap;background-color: rgb(255, 255, 255);">团队介绍</span>
</section>
<section style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;">
<br>
</section>
<p style="margin-top: 8px;line-height: 1.75em;margin-bottom: 8px;"><span style="box-sizing: inherit;color: rgba(25, 26, 31, 0.9);font-size: 15px;letter-spacing: 1px;">我们是淘天集团物流技术团队，服务淘天物流部及零售行业的产技团队，一直深耕在物流及供应链的数字化协同与运营领域：为零售业务提供灵活多样的经营模式管理方案及可以快速适配市场变化的经营策略数宇化管理工具；为商家提供高效低成本的物流及供应链解决方案，加快资金效率，提升协同效率；为消费者提供即时便捷的购物体验。</span></p>
<section style="margin-bottom: 8px;">
<br>
</section>
<section data-role="outer" label="Powered by 135editor.com" style="margin-bottom: 0px;outline: 0px;letter-spacing: 0.544px;visibility: visible;">
<section style="margin-top: 5px;outline: 0px;letter-spacing: 0.544px;font-size: 16px;word-break: break-all;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, "PingFang SC", Cambria, Cochin, Georgia, Times, "Times New Roman", serif;text-align: center;line-height: 1.75em;margin-bottom: 8px;">
<span style="outline: 0px;color: rgb(0, 17, 255);"><strong style="outline: 0px;">¤</strong></span>
<span style="outline: 0px;"><strong style="outline: 0px;"> 拓展阅读 </strong></span>
<span style="outline: 0px;color: rgb(0, 17, 255);"><strong style="outline: 0px;">¤</strong></span>
</section>
<section style="margin-top: 5px;margin-bottom: 5px;outline: 0px;letter-spacing: 0.544px;font-size: 16px;word-break: break-all;color: rgb(0, 0, 0);font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, "PingFang SC", Cambria, Cochin, Georgia, Times, "Times New Roman", serif;text-align: center;line-height: 1.75em;">
<br style="outline: 0px;">
</section>
<section style="margin-top: 8px;margin-bottom: 8px;outline: 0px;font-family: -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-indent: 0em;text-align: center;line-height: 1.75em;min-height: 24px;clear: both;visibility: visible;">
<a data-linktype="2" href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAxNDEwNjk5OQ%3D%3D%26action%3Dgetalbum%26album_id%3D2565944923443904512%23wechat_redirect" imgdata="null" imgurl linktype="text" style="outline: 0px;color: var(--weui-LINK);-webkit-user-drag: none;cursor: pointer;" tab="innerlink" target="_blank" textvalue="3DXR技术" rel="external nofollow noopener noreferrer">3DXR技术</a> |  
   <a data-linktype="2" href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAxNDEwNjk5OQ%3D%3D%26action%3Dgetalbum%26album_id%3D1533906991218294785%23wechat_redirect" imgdata="null" imgurl linktype="text" style="outline: 0px;color: var(--weui-LINK);-webkit-user-drag: none;cursor: pointer;" tab="innerlink" target="_blank" textvalue="终端技术" rel="external nofollow noopener noreferrer">终端技术</a> |  
   <a data-linktype="2" href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAxNDEwNjk5OQ%3D%3D%26action%3Dgetalbum%26album_id%3D1592015847500414978%23wechat_redirect" imgdata="null" imgurl linktype="text" style="outline: 0px;color: var(--weui-LINK);-webkit-user-drag: none;cursor: pointer;" tab="innerlink" target="_blank" textvalue="音视频技术" rel="external nofollow noopener noreferrer">音视频技术</a>
</section>
<p style="margin-top: 8px;margin-bottom: 8px;outline: 0px;min-height: 24px;font-family: -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-indent: 0em;text-align: center;line-height: 1.75em;visibility: visible;"><a data-linktype="2" href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAxNDEwNjk5OQ%3D%3D%26action%3Dgetalbum%26album_id%3D1539610690070642689%23wechat_redirect" imgdata="null" imgurl linktype="text" style="outline: 0px;color: var(--weui-LINK);-webkit-user-drag: none;cursor: pointer;" tab="innerlink" target="_blank" textvalue="服务端技术" rel="external nofollow noopener noreferrer">服务端技术</a><span style="outline: 0px;letter-spacing: 0.544px;"> | </span><a data-linktype="2" href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAxNDEwNjk5OQ%3D%3D%26action%3Dgetalbum%26album_id%3D2565883875634397185%23wechat_redirect" imgdata="null" imgurl linktype="text" style="outline: 0px;color: var(--weui-LINK);-webkit-user-drag: none;cursor: pointer;" tab="innerlink" target="_blank" textvalue="技术质量" rel="external nofollow noopener noreferrer">技术质量</a> | <a data-linktype="2" href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzAxNDEwNjk5OQ%3D%3D%26action%3Dgetalbum%26album_id%3D1522425612282494977%23wechat_redirect" imgdata="null" imgurl linktype="text" style="outline: 0px;color: var(--weui-LINK);-webkit-user-drag: none;cursor: pointer;" tab="innerlink" target="_blank" textvalue="数据算法" rel="external nofollow noopener noreferrer">数据算法</a></p>
<p style="margin-top: 8px;margin-bottom: 8px;outline: 0px;min-height: 24px;font-family: -apple-system, "system-ui", "Helvetica Neue", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei UI", "Microsoft YaHei", Arial, sans-serif;font-size: 15px;letter-spacing: 0.544px;text-indent: 0em;text-align: center;line-height: 1.75em;visibility: visible;"><br style="outline: 0px;"></p>
<section class="mp_profile_iframe_wrp" style="margin-bottom: 24px;outline: 0px;">
<mp-common-profile class="custom_select_card mp_profile_iframe js_wx_tap_highlight" data-alias="AlibabaMTT" data-biz_account_status="0" data-from="2" data-headimg="http://mmbiz.qpic.cn/mmbiz_png/33P2FdAnju8t5nZGhAatCrc4e2iaDfAaoInribRKxc7MOqdTGygfcLqSDxhj0trCHVEh94Sjl7zuWYzwouYtJ0VQ/300?wx_fmt=png&amp;wxfrom=19" data-id="MzAxNDEwNjk5OQ==" data-index="0" data-is_biz_ban="0" data-isban="0" data-nickname="大淘宝技术" data-origin_num="689" data-pluginname="mpprofile" data-signature="大淘宝技术官方账号" data-weui-theme="light"></mp-common-profile>
</section>
</section>
<p style="display: none;">
<mp-style-type data-value="3"></mp-style-type></p>
</div>
<p style="color: #858585; font-size: 13px;">本文分享自微信公众号 - 大淘宝技术（AlibabaMTT）。<br>如有侵权，请联系 support@oschina.cn 删除。<br>本文参与“<a href="https://www.oschina.net/sharing-plan" target="_blank" rel="external nofollow noopener noreferrer">OSC源创计划</a>”，欢迎正在阅读的你也加入，一起分享。</p>
</div>

</div>

<div>
<div class="tag-plugin link dis-select"><a class="link-card plain" title="如何正确地理解应用架构并开发" href="https://my.oschina.net/u/4662964/blog/10751229" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">如何正确地理解应用架构并开发</span><span class="cap link footnote">https://my.oschina.net/u/4662964/blog/10751229</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div>
</div>


<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>许可协议</span></div>
      <div class="body"><p>本文采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，转载请注明出处。</p>
</div>
    </section>
    
    <section id="share">
      <div class="header"><span>分享文章</span></div>
      <div class="body">
        <div class="link"><input class="copy-area" readonly="true" id="copy-link" value="https://blog.g0f.cn/post/b8a25cde.html"></div>
        <div class="social-wrap dis-select"><a class="social share-item wechat" onclick="util.toggle(&quot;qrcode-wechat&quot)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/b32ef3da1162a.svg"></a><a class="social share-item weibo" target="_blank" rel="external nofollow noopener noreferrer" href="https://service.weibo.com/share/share.php?url=https://blog.g0f.cn/post/b8a25cde.html&title=如何正确地理解应用架构并开发 - 果粉圈&pics=https://cdn.g0f.cn//?r=https://my.oschina.net&url=https://oscimg.oschina.net/oscnet/0c87b415-37eb-440b-8adc-76f3ca02d100.gif&summary=






















许多同学或多或少都经历过这样的流程：



新同学刚来公司，学习了解团队的一些工程代码，并了解其中的代码风格



团队新接手了一些其他团队的项目，需要了解工程结构以及概念



如何定义..."><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/80c07e4dbb303.svg"></a><a class="social share-item email" href="mailto:?subject=如何正确地理解应用架构并开发 - 果粉圈&amp;body=https://blog.g0f.cn/post/b8a25cde.html"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/a1b00e20f425d.svg"></a><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;复制成功&quot;)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/8411ed322ced6.svg"></a></div>
        
        <div class="qrcode" id="qrcode-wechat" style="opacity:0;height:0">
          <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=https://blog.g0f.cn/post/b8a25cde.html">
        </div>
        
      </div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">较新文章</div><a href="/post/47abadf3.html">春节文旅消费成绩单：跨省游订单翻番，定制游同比数倍增长</a></div><div class="item" id="next"><div class="note">较早文章</div><a href="/post/2be691e.html">2024江西（安义）铝型材及门窗博览会开幕，李红军陈敏出席</a></div></section></div>

<div class="related-wrap" id="related-posts">
    <section class="header">
      <div class="title cap theme">您可能感兴趣的文章</div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="/post/458ccead.html" title="2024春节档票房破50亿"><span class="title">2024春节档票房破50亿</span></a><a class="item" href="/post/12808cb7.html" title="你好，iLogtail 2.0！"><span class="title">你好，iLogtail 2.0！</span></a><a class="item" href="/post/7f205441.html" title="小米 Watch 2 智能手表海外曝光：圆形表盘设计，骁龙 W5 + 芯片"><span class="title">小米 Watch 2 智能手表海外曝光：圆形表盘设计，骁龙 W5 + 芯片</span></a><a class="item" href="/post/4757fea7.html" title="消息称苹果 iPhone 16 Pro Max 将拥有 iPhone 有史以来最强手机续航能力，仍配备 8GB 内存"><span class="title">消息称苹果 iPhone 16 Pro Max 将拥有 iPhone 有史以来最强手机续航能力，仍配备 8GB 内存</span></a><a class="item" href="/post/3aad60a.html" title="2023 年度 Rust 调查报告"><span class="title">2023 年度 Rust 调查报告</span></a></div></section></div>




<footer class="page-footer footnote"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs15">博客</span><a href="/">近期</a><a href="/">分类</a><a href="/">标签</a><a href="/">归档</a></div><div class="sitemap-group"><span class="fs15">项目</span><a href="/">开源库</a></div><div class="sitemap-group"><span class="fs15">社交</span><a href="/">友链</a><a href="/">留言板</a></div><div class="sitemap-group"><span class="fs15">更多</span><a href="/">关于本站</a><a href="/">GitHub</a></div></div><div class="text"><p>本博客所有文章除特别声明外，均采用 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议，保留作者链接，如需删除可联系我。转载请注明出处。<a href="https://blog.g0f.cn/sitemap.xml">sitemap</a></p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">本文目录</span><a class="cap-action" onclick="sidebar.toggleTOC()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  混乱的应用架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  有序的应用架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  包和模块之间的区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  典型的业务系统</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  分层模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  CQRS模式(命令和查询责任分离)</span></a></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#js_content"><span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  六边形架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  洋葱圈架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  业务工程中最基本的Module划分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">非依赖倒置下的Module分层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">依赖倒置（DIP）下的Module分层（推荐）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#js_content"><span class="toc-text">分层职责</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  如果我要提供一个SDK对外提供服务怎么办？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  包结构的划分</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">你可能会有疑问，为什么Domain的model是可选的？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  应用架构中如何处理解耦问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text"></span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">防腐层设计在应用架构中的应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">高内聚低耦合在包划分中的体现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  如何对齐文中的概念和实际业务中的Module?</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js_content"><span class="toc-text">那么如何找到这个工程目前的工程规范呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js_content"><span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js_content"><span class="toc-text">如果有工程结构的文档，优先阅读（省时间）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  如果业务代码中的应用架构不合理，你有自己的想法怎么办？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  DDD下业务代码的组织方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">“写操作”在DDD中的实现3种场景，分别是</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">通过聚合根完成业务请求，这是DDD完成业务请求的典型方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">读操作，同样给出了3种方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#js_content"><span class="toc-text">对于业务代码来说，怎么提炼出业务逻辑和技术细节？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  API层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  Application层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  Domain</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#js_content"><span class="toc-text">▐  Infrastructure</span></a></li></ol></li></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>回到顶部</span></a></div></widget>
</div></aside><div class="float-panel blur">
  <button type="button" style="display:none" class="laptop-only rightbar-toggle mobile" onclick="sidebar.rightbar()">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type="button" style="display:none" class="mobile-only leftbar-toggle mobile" onclick="sidebar.leftbar()">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `刚刚`,
      min: `分钟前`,
      hour: `小时前`,
      day: `天前`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js`,
    marked: `https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // 懒加载 css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // 默认异步，如果需要同步，第二个参数传入 {} 即可
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 等待 1 完成 2 超时
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('请求超时');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>

<!-- required -->
<script src="/js/main.js?v=1.26.8" async></script>

<!-- optional -->

  <script>
  function load_comment(){
    if(!document.getElementById("waline_container"))return;
    utils.css('https://unpkg.com/@waline/client@v2/dist/waline.css');
    utils.js('https://unpkg.com/@waline/client@v2/dist/waline.js', {defer:true}).then(function () {
      const el = document.getElementById("waline_container");
      var path = el.getAttribute('comment_id');
      if (!path) {
        path = decodeURI(window.location.pathname);
      }
      Waline.init(Object.assign({"js":"https://unpkg.com/@waline/client@v2/dist/waline.js","css":"https://unpkg.com/@waline/client@v2/dist/waline.css","serverURL":"https://waline.g0f.cn","commentCount":true,"pageview":false,"locale":{"placeholder":"你可以在遵守国家法律的前提下畅所欲言"}}, {
        el: '#waline_container',
        path: path,
        
      }));
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    load_comment();
  });

</script>




<script>
  ctx.services = {
    fcircle: `/js/services/fcircle.js`,
    friends: `/js/services/friends.js`,
    ghinfo: `/js/services/ghinfo.js`,
    siteinfo: `/js/services/siteinfo.js`,
    mdrender: `/js/services/mdrender.js`,
    memos: `/js/services/memos.js`,
    sites: `/js/services/sites.js`,
    timeline: `/js/services/timeline.js`,
    weibo: `/js/services/weibo.js`,
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id];
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`stellar-${id}-api`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.bootcdn.net/ajax/libs/flying-pages/2.1.2/flying-pages.min.js"></script><script defer src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.8.4/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.min.css`,
    js: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.umd.min.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('stellar-memos-api');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || null
        }
      });
    })
  }
</script><script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          loop: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script><script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `复制成功`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
