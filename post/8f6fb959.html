
<!DOCTYPE html><html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta name="hexo-theme" content="https://github.com/xaoxuu/hexo-theme-stellar/tree/1.26.8" theme-name="Stellar" theme-version="1.26.8">
  
  <meta name="generator" content="Hexo 6.3.0">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="theme-color" content="#f8f8f8">
  
  <title>Highlights From Git 2.44 - æœç²‰åœˆ</title>

  
    <meta name="description" content="The open source Git project just released Git 2.44 with features and bug fixes from over 85 contributors, 34 of them new. We last caught up with you on the latest in Git back when 2.43 was released">
<meta property="og:type" content="article">
<meta property="og:title" content="Highlights From Git 2.44">
<meta property="og:url" content="https://blog.g0f.cn/post/8f6fb959.html">
<meta property="og:site_name" content="æœç²‰åœˆ">
<meta property="og:description" content="The open source Git project just released Git 2.44 with features and bug fixes from over 85 contributors, 34 of them new. We last caught up with you on the latest in Git back when 2.43 was released">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-02-23T09:23:22.000Z">
<meta property="article:modified_time" content="2024-02-23T09:23:22.000Z">
<meta property="article:author" content="naive">
<meta property="article:tag" content="These Blogs">
<meta property="article:tag" content="Github">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <meta name="keywords" content="These Blogs,Github">

  <!-- feed -->
  
    <link rel="alternate" href="/atom.xml" title="æœç²‰åœˆ" type="application/atom+xml">
  

  <link rel="stylesheet" href="/css/main.css?v=1.26.8">

  

  

  
</head>
<body>

<div class="l_body s:aa content tech" id="start" layout="post"><aside class="l_left"><div class="leftbar-container">


<header class="header"><div class="logo-wrap"><a class="avatar" href="/"><div class="bg" style="opacity:0;background-image:url(https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp);"></div><img no-lazy class="avatar" src="/avatar.jpg" onerror="javascript:this.classList.add('error');this.src='https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/image/2659360.svg';"></a><a class="title" href="/"><div class="main" ff="title">æœç²‰åœˆ</div><div class="sub normal cap">æ˜æ˜åªæ˜¯ç©ç©è€Œå·²ğŸ˜ƒ</div><div class="sub hover cap" style="opacity:0"> ä½ å±…ç„¶è¿˜å½“çœŸäº†ğŸ˜­</div></a></div></header>

<div class="nav-area">
<div class="search-wrapper" id="search-wrapper"><form class="search-form"><a class="search-button" onclick="document.getElementById(&quot;search-input&quot;).focus();"><svg t="1705074644177" viewbox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1560" width="200" height="200"><path d="M1008.839137 935.96571L792.364903 719.491476a56.783488 56.783488 0 0 0-80.152866 0 358.53545 358.53545 0 1 1 100.857314-335.166073 362.840335 362.840335 0 0 1-3.689902 170.145468 51.248635 51.248635 0 1 0 99.217358 26.444296 462.057693 462.057693 0 1 0-158.255785 242.303546l185.930047 185.725053a51.248635 51.248635 0 0 0 72.568068 0 51.248635 51.248635 0 0 0 0-72.978056z" p-id="1561"/><path d="M616.479587 615.969233a50.428657 50.428657 0 0 0-61.498362-5.534852 174.655348 174.655348 0 0 1-177.525271 3.484907 49.403684 49.403684 0 0 0-58.833433 6.76482l-3.074918 2.869923a49.403684 49.403684 0 0 0 8.609771 78.10292 277.767601 277.767601 0 0 0 286.992355-5.739847 49.403684 49.403684 0 0 0 8.404776-76.667958z" p-id="1562"/></svg></a><input type="text" class="search-input" id="search-input" placeholder="ç«™å†…æœç´¢"></form><div id="search-result"></div><div class="search-no-result">æ²¡æœ‰æ‰¾åˆ°å†…å®¹ï¼</div></div>


<nav class="menu dis-select"><a class="nav-item active" title="åšå®¢" href="/" style="color:#1BCDFC"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M5.879 2.879C5 3.757 5 5.172 5 8v8c0 2.828 0 4.243.879 5.121C6.757 22 8.172 22 11 22h2c2.828 0 4.243 0 5.121-.879C19 20.243 19 18.828 19 16V8c0-2.828 0-4.243-.879-5.121C17.243 2 15.828 2 13 2h-2c-2.828 0-4.243 0-5.121.879M8.25 17a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 0 1.5H9a.75.75 0 0 1-.75-.75M9 12.25a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5zM8.25 9A.75.75 0 0 1 9 8.25h6a.75.75 0 0 1 0 1.5H9A.75.75 0 0 1 8.25 9" clip-rule="evenodd"/><path fill="currentColor" d="M5.235 4.058C5 4.941 5 6.177 5 8v8c0 1.823 0 3.058.235 3.942L5 19.924c-.975-.096-1.631-.313-2.121-.803C2 18.243 2 16.828 2 14v-4c0-2.829 0-4.243.879-5.121c.49-.49 1.146-.707 2.121-.803zm13.53 15.884C19 19.058 19 17.822 19 16V8c0-1.823 0-3.059-.235-3.942l.235.018c.975.096 1.631.313 2.121.803C22 5.757 22 7.17 22 9.999v4c0 2.83 0 4.243-.879 5.122c-.49.49-1.146.707-2.121.803z" opacity=".5"/></svg></a><a class="nav-item" title="æ–‡æ¡£" href="/" style="color:#3DC550"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M14.25 4.48v3.057c0 .111 0 .27.02.406a.936.936 0 0 0 .445.683a.96.96 0 0 0 .783.072c.13-.04.272-.108.378-.159L17 8.005l1.124.534c.106.05.248.119.378.16a.958.958 0 0 0 .783-.073a.936.936 0 0 0 .444-.683c.021-.136.021-.295.021-.406V3.031c.113-.005.224-.01.332-.013C21.154 2.98 22 3.86 22 4.933v11.21c0 1.112-.906 2.01-2.015 2.08c-.97.06-2.108.179-2.985.41c-1.082.286-1.99 1.068-3.373 1.436c-.626.167-1.324.257-1.627.323V5.174c.32-.079 1.382-.203 1.674-.371c.184-.107.377-.216.576-.323m5.478 8.338a.75.75 0 0 1-.546.91l-4 1a.75.75 0 0 1-.364-1.456l4-1a.75.75 0 0 1 .91.546" clip-rule="evenodd"/><path fill="currentColor" d="M18.25 3.151c-.62.073-1.23.18-1.75.336a8.2 8.2 0 0 0-.75.27v3.182l.75-.356l.008-.005a1.13 1.13 0 0 1 .492-.13c.047 0 .094.004.138.01c.175.029.315.1.354.12l.009.005l.749.356V3.647z"/><path fill="currentColor" d="M12 5.214c-.334-.064-1.057-.161-1.718-.339C8.938 4.515 8.05 3.765 7 3.487c-.887-.234-2.041-.352-3.018-.412C2.886 3.007 2 3.9 2 4.998v11.146c0 1.11.906 2.01 2.015 2.079c.97.06 2.108.179 2.985.41c.486.129 1.216.431 1.873.726c1.005.451 2.052.797 3.127 1.034z" opacity=".5"/><path fill="currentColor" d="M4.273 12.818a.75.75 0 0 1 .91-.545l4 1a.75.75 0 1 1-.365 1.455l-4-1a.75.75 0 0 1-.545-.91m.909-4.545a.75.75 0 1 0-.364 1.455l4 1a.75.75 0 0 0 .364-1.455z"/></svg></a><a class="nav-item" title="æ¢ç´¢" href="/" style="color:#FA6400"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" d="M20 12a8 8 0 1 1-16 0a8 8 0 0 1 16 0" opacity=".5"/><path fill="currentColor" d="M17.712 5.453c1.047-.193 2.006-.259 2.797-.152c.77.103 1.536.393 1.956 1.064c.446.714.312 1.542-.012 2.258c-.33.728-.918 1.499-1.672 2.268c-1.516 1.547-3.836 3.226-6.597 4.697c-2.763 1.472-5.495 2.484-7.694 2.92c-1.095.217-2.098.299-2.923.201c-.8-.095-1.6-.383-2.032-1.075c-.47-.752-.296-1.63.07-2.379c.375-.768 1.032-1.586 1.872-2.403L4 12.416c0 .219.083.71.168 1.146c.045.23.09.444.123.596c-.652.666-1.098 1.263-1.339 1.756c-.277.567-.208.825-.145.925c.072.116.305.305.937.38c.609.073 1.44.018 2.455-.183c2.02-.4 4.613-1.351 7.28-2.772c2.667-1.42 4.85-3.015 6.23-4.423c.694-.707 1.15-1.334 1.377-1.836c.233-.515.167-.75.107-.844c-.07-.112-.289-.294-.883-.374c-.542-.072-1.272-.041-2.163.112L16.87 5.656c.338-.101.658-.17.842-.203"/></svg></a><a class="nav-item" title="ç¤¾äº¤" href="/" style="color:#F44336"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="currentColor" d="m13.629 20.472l-.542.916c-.483.816-1.69.816-2.174 0l-.542-.916c-.42-.71-.63-1.066-.968-1.262c-.338-.197-.763-.204-1.613-.219c-1.256-.021-2.043-.098-2.703-.372a5 5 0 0 1-2.706-2.706C2 14.995 2 13.83 2 11.5v-1c0-3.273 0-4.91.737-6.112a5 5 0 0 1 1.65-1.651C5.59 2 7.228 2 10.5 2h3c3.273 0 4.91 0 6.113.737a5 5 0 0 1 1.65 1.65C22 5.59 22 7.228 22 10.5v1c0 2.33 0 3.495-.38 4.413a5 5 0 0 1-2.707 2.706c-.66.274-1.447.35-2.703.372c-.85.015-1.275.022-1.613.219c-.338.196-.548.551-.968 1.262" opacity=".5"/><path fill="currentColor" d="M10.99 14.308c-1.327-.978-3.49-2.84-3.49-4.593c0-2.677 2.475-3.677 4.5-1.609c2.025-2.068 4.5-1.068 4.5 1.609c0 1.752-2.163 3.615-3.49 4.593c-.454.335-.681.502-1.01.502c-.329 0-.556-.167-1.01-.502"/></svg></a></nav>
</div>
<div class="widgets">


<widget class="widget-wrapper post-list"><div class="widget-header dis-select"><span class="name">æœ€è¿‘æ›´æ–°</span></div><div class="widget-body fs14"><a class="item title" href="/post/5855cd9f.html"><span class="title">ï¼ˆæ–°æ˜¥èµ°åŸºå±‚ï¼‰å¹´ç”»éé—ä¼ æ‰¿äººçš„åšå®ˆä¸åˆ›æ–°</span></a><a class="item title" href="/post/d79129e7.html"><span class="title">é‚‚é€…å›½æ½®ç¹èŠ±æµªæ¼« è¿™äº›åœ°æ–¹é¾™å¹´â€œæ½®â€å‘³æ‹‰æ»¡äº†ï¼</span></a><a class="item title" href="/post/1b884d7c.html"><span class="title">é”¦ç»£ä¸­å›½å¹´ï½œåœ¨æ—¥æœ¬æ„Ÿå—é¾™å¹´æ˜¥èŠ‚çš„æµ“æµ“â€œå¹´å‘³å„¿â€</span></a><a class="item title" href="/post/5d328e1e.html"><span class="title">é¦™æ¸¯å»‰æ”¿å…¬ç½²æˆç«‹50å‘¨å¹´ï¼šè§è¯é¦™æ¸¯åŠä¸–çºªåè´ªå²</span></a><a class="item title" href="/post/4161bef1.html"><span class="title">é©¬å…‹é¾™ä¸ä»¥è‰²åˆ—æ€»ç†å†…å¡”å°¼äºšèƒ¡é€šç”µè¯è®¨è®ºåŠ æ²™å±€åŠ¿</span></a><a class="item title" href="/post/be57e44b.html"><span class="title">ï¼ˆæ–°æ˜¥è§é—»ï¼‰æ˜¥èŠ‚å‡æœŸä¸‰äºšå…´èµ·ç©ºä¸­çœ‹æµ·çƒ­</span></a><a class="item title" href="/post/c1eb7f63.html"><span class="title">å°å°¼å›½é˜²éƒ¨é•¿æ™®æ‹‰åšæ²ƒå®£å¸ƒèµ¢å¾—æ€»ç»Ÿé€‰ä¸¾</span></a><a class="item title" href="/post/ac817149.html"><span class="title">å¤šåŠŸèƒ½æ–°èƒ½æºè¡¥ç»™ç«™åŠ©åŠ›äº¤é€šç»¿è‰²è½¬å‹ ç”µåŠ›è€—èƒ½å®ç°â€œç¢³ä¸­å’Œâ€</span></a><a class="item title" href="/post/21e55478.html"><span class="title">å·´é»ä¸Šè¯‰æ³•é™¢ç»´æŒè¨ç§‘é½åœ¨ç«é€‰èµ„é‡‘è¶…æ ‡æ¡ˆä¸­çš„æœ‰ç½ªåˆ¤å†³</span></a><a class="item title" href="/post/732f6c75.html"><span class="title">å¿«é€Ÿè®¡ç¥¨ç»Ÿè®¡æ˜¾ç¤ºï¼šæ™®æ‹‰åšæ²ƒèµ¢å¾—å°å°¼å¤§é€‰</span></a></div></widget>
</div>
<footer class="footer dis-select"><div class="social-wrap"><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/08a41b181ce68.svg"></a><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/3845874.svg"></a><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/3616429.svg"></a><a class="social" href="/" rel="noopener noreferrer"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/942ebbf1a4b91.svg"></a></div></footer>
</div></aside><div class="l_main" id="main">





<div class="article banner top">
  <div class="content">
    <div class="top bread-nav footnote"><div class="left"><div class="flex-row" id="breadcrumb"><a class="cap breadcrumb" href="/">ä¸»é¡µ</a>
<span class="sep"></span><a class="cap breadcrumb" href="/">æ–‡ç« </a><span class="sep"></span><a class="cap breadcrumb-link" href="/categories/these-blogs/">These Blogs</a> <span class="sep"></span> <a class="cap breadcrumb-link" href="/categories/these-blogs/github/">Github</a></div>
<div class="flex-row" id="post-meta"><span class="text created">å‘å¸ƒäºï¼š<time datetime="2024-02-23T09:23:22.000Z">2024-02-23</time></span><span class="sep updated"></span><span class="text updated">æ›´æ–°äºï¼š<time datetime="2024-02-23T09:23:22.000Z">2024-02-23</time></span></div></div></div>
    
    <div class="bottom only-title">
      
      <div class="text-area">
        <h1 class="text title"><span>Highlights From Git 2.44</span></h1>
        
      </div>
    </div>
    
  </div>
  </div><article class="md-text content"><div>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">

<html><body><p>The open source Git project <a target="_blank" rel="external nofollow noopener noreferrer" href="https://lore.kernel.org/git/xmqqbk87w164.fsf@gitster.g/T/#u">just released Git 2.44</a> with features and bug fixes from over 85 contributors, 34 of them new. We last caught up with you on the latest in Git back when <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/2023-11-20-highlights-from-git-2-43/">2.43 was released</a>.</p>
<p>To celebrate this most recent release, here is GitHubâ€™s look at some of the most interesting features and changes introduced since last time.</p>
<h2 id="faster-pack-generation-with-multi-pack-reuse">Faster pack generation with multi-pack reuse<a aria-label="Faster pack generation with multi-pack reuse" class="heading-link pl-2 text-italic text-bold" href="#faster-pack-generation-with-multi-pack-reuse"></a></h2>
<p>If youâ€™ve ever looked closely at Gitâ€™s output when pushing or pulling a repository to/from GitHub<sup id="fnref-76639-1"><a class="jetpack-footnote" href="#fn-76639-1" title="Read footnote.">1</a></sup>, you might have noticed the <code>pack-reused</code> number that appears at the end of your output, like so:</p>
<pre><code>$ git clone git@github.com:git/git.git
Cloning into 'git'...
remote: Enumerating objects: 361232, done.
remote: Counting objects: 100% (942/942), done.
remote: Compressing objects: 100% (453/453), done.
remote: Total 361232 (delta 598), reused 773 (delta 487), pack-reused 360290
[...]
</code></pre>
<p>If youâ€™ve ever looked at that number (above, this is <code>pack-reused 360290</code>), and wondered what it meant, then look no further!</p>
<p>In general terms, that number refers to how much of the pack GitHub was able to send by (more-or-less) streaming verbatim sections of a pack that already exists down to the cloner, instead of generating a new pack on the fly. When Git is sending objects to the client (when fetching/cloning), to the server (when pushing), or to itself (when repacking), Git needs to generate a <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/book/en/v2/Git-Internals-Packfiles">packfile</a> that contains the set of objects being transferred.  For many of the objects in this pack, Git will locate those objects, open and parse them, then optionally try and pair them with some existing object to form a <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/docs/pack-format/2.44.0#_deltified_representation">delta chain</a>.</p>
<p>Repeating this process over all objects in the pack yields a more compact result, since Git will find and pair objects who have similar content to one  another to save space. When pushing a small amount of data to GitHub, this search is usually negligible and doesnâ€™t take a significant amount of time. But during a clone, loading and trying to re-delta-ify all of the reachable objects in a repository can become prohibitively expensive, especially when carried out over tens of thousands of clones or more.</p>
<p>To save time, Git takes a shortcut: because the <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/docs/pack-protocol/2.44.0#_packfile_data">wire format</a> used to transfer objects uses the same representation as the <code>.pack</code> files on disk (in <code>$GIT_DIR/objects/pack</code>), it can reuse sections of an existing packfile byte-for-byte when generating the new pack to send down to the client.</p>
<p>In our above example, thatâ€™s exactly what happened: the <code>pack-reused 360290</code> portion of our output indicated that GitHub was able to reuse 360,290 objects from disk without having to re-open and search for new deltas. That process was carried out only over the remaining objects (in this case, 361,232 less the reused quantity gives us just over 900 objects that took the slow path).</p>
<p>Verbatim pack-reuse sounds like a great deal, right? It is, but there are a couple of gotchas that impose a couple of restrictions on how often Git can make use of this optimization:</p>
<ul>
<li>Packfiles cannot contain the same object more than once. For single-pack reuse, this is easy enough (since the pack weâ€™re reusing from also canâ€™t contain duplicate copies of an object), but it makes implementing multi-pack reuse difficult. </li>
<li>Certain kinds of deltas (which identify their base by the number of bytes between the delta and base) need to be â€œpatchedâ€ if there is an omitted section between the delta and its base, changing the offset.</li>
</ul>
<p>In order to take full advantage of verbatim pack-reuse, a repository needs to have a majority of its objects packed together in a single packfile. For many repositories, this isnâ€™t a huge deal, but it can become prohibitively expensive for large repositories with many hundreds of millions of objects.</p>
<p>Git 2.44 ships with new support for reusing objects across multiple packs. When using a multi-pack index with reachability bitmaps (for more about these, check out our post, <em><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/2021-04-29-scaling-monorepo-maintenance/">Scaling monorepo maintenance</a></em>), Git can now take advantage of this optimization across multiple packs, eliminating the need to repack your repository into a single pack.</p>
<p>Weâ€™ll cover the precise details in a future blog post dedicated to multi-pack reuse. For now, you might notice a new line of output in your terminal the next time you push to GitHub:</p>
<pre><code>$ git push
Enumerating objects: 350175, done.
Counting objects: 100% (832/832), done.
Compressing objects: 100% (132/132), done.
Total 350175 (delta 735), reused 700 (delta 700), pack-reused 349343 (from 36)
[...]
</code></pre>
<p>Notice instead of just <code>pack-reused</code>, we get an extra piece of information next to it (<code>(from 36)</code>), indicating the number of packs from which objects were reused.</p>
<p>To try this out yourself, upgrade your local installation of Git, and run</p>
<pre><code>$ git config --global pack.allowPackReuse multi
$ git multi-pack-index write --bitmap
</code></pre>
<p>before the next time you push to GitHub.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/d4833b22abc0093153534cfaa93bb90be9a708ca...23c1e71369f4a5a5e5b176d77cfc9d8edf68ebec">source</a>]</p>
<h2 id="faster-rebases-and-much-more-with-git-replay">Faster rebases (and much more) with <code>git replay</code><a aria-label="Faster rebases (and much more) with &lt;code&gt;git replay&lt;/code&gt;" class="heading-link pl-2 text-italic text-bold" href="#faster-rebases-and-much-more-with-git-replay"></a></h2>
<p>If youâ€™ve read this series before, youâ€™re no doubt familiar with our coverage of <code>merge-ort</code>, a recent development in Git that is a from-scratch rewrite of the merging backend. If youâ€™re a newcomer to this series (first of all, welcome!), our coverage beginning in our <em><a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/2021-08-16-highlights-from-git-2-33/#merge-ort-a-new-merge-strategy">Highlights from Git 2.33</a></em> is a great place to start.</p>
<p><code>merge-ort</code> was introduced almost a dozen Git versions ago and aimed to solve several long-standing issues with its predecessor, the <code>recursive</code> backend. The recursive backend was notoriously difficult to modify, and had difficulty performing well when dealing with merges that involve a large number of renames.</p>
<p>The <code>merge-ort</code> backend was introduced to address these issues, by providing a structured implementation that was correct (with respect to the existing behavior, making it a drop-in replacement for the existing backend), performant, and easy to change. In Git 2.34 (for those interested, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/2021-11-15-highlights-from-git-2-34/#a-new-default-merge-strategy">our coverage begins here</a>), <code>merge-ort</code> became the default merging backend, meaning that if youâ€™re running Git 2.34 or newer and donâ€™t have any special configuration, youâ€™re almost certainly already making use of <code>merge-ort</code>. Modern versions of Git use the <code>merge-ort</code> backend to resolve conflicts between files on either side of a merge or rebase. With <code>merge-ort</code> in place and widely used, merges and rebases could be computed significantly faster.</p>
<p>But <code>merge-ort</code> also makes it possible to compute merges and rebases without requiring that you have a fully populated checkout of your repository. To perform merges, the <code><a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/docs/git-merge-tree/2.44.0">merge-tree command</a></code> command used the <code>--write-tree</code> option to compute merges with <code>merge-ort</code> without requiring a checked out version of your repository.</p>
<p>Rebases were a different story. The existing <code>git rebase</code> sub-command comes with a lot of historical design decisions and assumptions that would make integrating it with <code>merge-ort</code> less than straightforward, and would hinder performance without breaking backwards compatibility guarantees<sup id="fnref-76639-2"><a class="jetpack-footnote" href="#fn-76639-2" title="Read footnote.">2</a></sup>.</p>
<p><code>git replay</code> exists to address these challenges. It offers an alternative to <code>git rebase</code> that, in addition to being far more performant:</p>
<ul>
<li>Can operate in bare repositories.</li>
<li>Can rebase branches other than the currently checked-out one (in non-bare repositories).</li>
<li>Can operate over multiple branches simultaneously.</li>
</ul>
<p>and much more. GitHub has been using <code>merge-ort</code> for <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/2023-07-27-scaling-merge-ort-across-github/">more than a year</a> to power all merges (and more recently, all rebases) performed on GitHub.com, and it has brought substantial performance improvements to both operations.</p>
<p>You might find <code>git replay</code> useful if youâ€™re scripting around in a repository, interested in eeking out performance gains relative to <code>git rebase</code>, or are just interested in playing around with the latest and greatest developments in the Git project. Regardless of which camp youâ€™re in, you can <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/docs/git-replay/2.44.0">learn more about <code>git replay</code> here</a>.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/333536527011ebcc0a4d1e7f072dc435f605e224...e928c11e29966b0a8f4340465b8238501c994eb1">source</a>]</p>
<hr>
<ul>
<li>While weâ€™re on the topic of rebases, letâ€™s talk about <code>--autosquash</code>. In case youâ€™ve never used that option before, donâ€™t worry; hereâ€™s a quick introduction. When rebasing, Git will try to combine commits whose subject line begins with <code>fixup! [...]</code>, <code>squash! [...]</code>, or <code>amend! [...]</code>, where the <code>[...]</code> is the log message of some other commit. Git will pair these up and reorganize the todo list to put the <code>fixup! [...]</code> commits (etc.) next to their non-<code>fixup!</code> counterparts.
<p>Depending on the verb, Git will either combine changes, alter the commit message, or merge successive commit messages together, allowing you to easily edit your work.</p>
<p>However, previous versions of Git only provided functionality for these options when using interactive rebases with <code>git rebase --interactive</code> (or just <code>git rebase -i</code>, for short). If you wrote a <code>fixup!</code> commit (or similar) and wanted to quickly apply it at the right spot in history, youâ€™d have to either: (a) run <code>git rebase -i</code> and close your <code>$EDITOR</code>, or (b) run <code>GIT_SEQUENCE_EDITOR=true git rebase -i</code>.</p>
<p>In Git 2.44, autosquash-ing now works with non-<code>--interactive</code> rebases, meaning that you can do a bare <code>git rebase</code> and apply your <code>fixup!</code>â€˜s in their respective locations without having to inspect the todo list or munge your <code>GIT_SEQUENCE_EDITOR</code> environment variable.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/98d0a1f93e869b29041de9122fe31a62c40a4e78...cb00f524df206f64174840b3f85eb39289e5a038">source</a>]</p>
</li>
<li>
<p>If youâ€™ve been using Git for a long time (or are a newcomer), youâ€™ve probably seen a message beginning with <code>hint:</code>, like so:</p>
<pre><code>hint: Updates were rejected because the tag already exists in the remote. 
hint: Disable this message with "git config advice.pushAlreadyExists false" 
</code></pre>
<p>Like the hint suggests, you can run <code>git config advice.pushAlreadyExists false</code> to tell Git to avoid showing you the message. But what if you find the advice useful? Perhaps you want to be warned (for example) when attempting to push a tag without <code>--force</code> to a remote which already has a tag by that same name. When thatâ€™s the case, you likely donâ€™t want to also see the â€œDisable this message with [â€¦]â€ portion of the hint.</p>
<p>In Git 2.44, you can now set <code>git config advice.pushAlreadyExists true</code> to indicate that you want to receive that hint, and Git will continue to show it to you, suppressing the â€œDisable this message with [â€¦]â€ portion of the message.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/2e77b83993fa158da009dfdf18ec9f8856053895...d919965af116d145de40853caf0e4228c97da325">source</a>]</p>
</li>
<li>
<p>Quick quiz: what does the <code>--no-sort</code> option do when given to <code>git for-each-ref</code>? If you thought, â€œsurely it doesnâ€™t list all references in a non-alphabetical order,â€ then congratulations, youâ€™re a veteran Git user!</p>
<p>Despite its name <code>--no-sort</code> provided the output of <code>git for-each-ref</code> in a sorted order, making it unable to take advantage of certain optimizations that assume an arbitrary ordering.</p>
<p>For those interested in the technical details, you can learn more in the patches linked below. If you just want the numbers, youâ€™re in luck: on my machine, <code>git for-each-ref --no-sort</code> outperforms a bog-standard <code>git for-each-ref</code> by more than 20% on a repository with a large number of references.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/e020e55a62dc3281504858d4091847d18ca63b2d...294bfc24418e81dfb204d14a3c3c24af9b195179">source</a>]</p>
</li>
<li>
<p>If youâ€™ve spent much time pursuing the Git documentation, youâ€™ve likely encountered the term â€œpathspecâ€, and perhaps wondered what it meant. In Git parlance, â€œpathspecâ€ roughly corresponds to â€œways to limit filepathsâ€ when used in conjunction with a Git command.</p>
<p>There are lots of examples <a target="_blank" rel="external nofollow noopener noreferrer" href="https://git-scm.com/docs/gitglossary/2.43.0#Documentation/gitglossary.txt-aiddefpathspecapathspec">in the documentation</a>, but some notable ones include: <code>git show ':^Documentation/'</code> (meaning, â€œshow me the last commit, excluding any changes in the Documentation directoryâ€), <code>git show ':(icase)**/*sha256*'</code> (meaning, â€œshow me files with â€˜sha256â€™ in their path, regardless of casingâ€), and <code>git show ':(attr:~binary)'</code> (meaning, â€œshow me files which do not have their <code>binary</code> attribute set via <code>.gitattributes</code>â€œ).</p>
<p>In Git 2.44, <code>git add</code> now understands the <code>attr</code> pathspec magic, meaning that you can do things like <code>git add ':(attr:~binary)'</code> to stage all text/non-binary files in the index.</p>
<p>Git 2.44 also introduces a new pathspec attribute, called <code>builtin_objectmode</code>. This new pathspec magic allows filtering paths by their mode (for example, <code>100644</code> for non-executable files, <code>100755</code> for executable ones, <code>160000</code> for submodules, etc.). The <code>builtin_</code> prefix indicates that you can use this pathspec magic without needing to set any values in your <code>.gitattributes</code> file(s), meaning that you can do things like <code>git add ':(builtin_objectmode=100755)'</code> to add all executable files in your working copy.</p>
<p>[<a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/34401b7ddbd79c8511e864048bc52d896eac2f22...1164c7232e2773917c0fcf9a98b3e7a417a7644f">source</a>, <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/compare/99bb88a6f64171d3ba279984c87f854317fad69a...2232a88ab6bfbe41faf73f85912937e20bf8b4ee">source</a>]</p>
</li>
</ul>
<h2 id="the-whole-shebang">The whole shebang<a aria-label="The whole shebang" class="heading-link pl-2 text-italic text-bold" href="#the-whole-shebang"></a></h2>
<p>Thatâ€™s just a sample of changes from the latest release. For more, check out the release notes for <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/blob/v2.44.0/Documentation/RelNotes/2.44.0.txt">2.44</a>, or <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git/tree/v2.44.0/Documentation/RelNotes">any previous version</a> in <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/git/git">the Git repository</a>.</p>
<p><!-- Footnotes themselves at the bottom. --></p>
<h3 id="notes">Notes<a aria-label="Notes" class="heading-link pl-2 text-italic text-bold" href="#notes"></a></h3>
<div class="footnotes">
<hr>
<ol>
<li id="fn-76639-1">
If youâ€™re reading this blog post (especially the footnotes!) thereâ€™s a pretty good chance that you have.Â <a href="#fnref-76639-1" title="Return to main content.">â†©</a>
</li>
<li id="fn-76639-2">
For those curious, an extensive discussion on why <code>git replay</code> was used instead of extending <code>git rebase</code> <a target="_blank" rel="external nofollow noopener noreferrer" href="https://lore.kernel.org/all/20230407072415.1360068-1-christian.couder@gmail.com/">can be found on the mailing list here</a>.Â <a href="#fnref-76639-2" title="Return to main content.">â†©</a>
</li>
</ol>
</div>
</body></html>
<p>The post <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog/2024-02-23-highlights-from-git-2-44/">Highlights from Git 2.44</a> appeared first on <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.blog">The GitHub Blog</a>.</p>

</div>

<div>
<div class="tag-plugin link dis-select"><a class="link-card plain" title="Highlights from Git 2.44" href="https://github.blog/2024-02-23-highlights-from-git-2-44/" target="_blank" rel="external nofollow noopener noreferrer" cardlink autofill="icon"><div class="left"><span class="title">Highlights from Git 2.44</span><span class="cap link footnote">https://github.blog/2024-02-23-highlights-from-git-2-44/</span></div><div class="right"><div class="lazy img" data-bg="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/link/8f277b4ee0ecd.svg"></div></div></a></div>
</div>


<div class="article-footer fs14">
    <section id="license">
      <div class="header"><span>è®¸å¯åè®®</span></div>
      <div class="body"><p>æœ¬æ–‡é‡‡ç”¨ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
</div>
    </section>
    
    <section id="share">
      <div class="header"><span>åˆ†äº«æ–‡ç« </span></div>
      <div class="body">
        <div class="link"><input class="copy-area" readonly="true" id="copy-link" value="https://blog.g0f.cn/post/8f6fb959.html"></div>
        <div class="social-wrap dis-select"><a class="social share-item wechat" onclick="util.toggle(&quot;qrcode-wechat&quot)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/b32ef3da1162a.svg"></a><a class="social share-item weibo" target="_blank" rel="external nofollow noopener noreferrer" href="https://service.weibo.com/share/share.php?url=https://blog.g0f.cn/post/8f6fb959.html&title=Highlights From Git 2.44 - æœç²‰åœˆ&pics=https://picsum.photos/400/300?random=8188&summary=


The open source Git project just released Git 2.44 with features and bug fixes from over 85 contributors, 34 of th..."><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/80c07e4dbb303.svg"></a><a class="social share-item email" href="mailto:?subject=Highlights From Git 2.44 - æœç²‰åœˆ&amp;body=https://blog.g0f.cn/post/8f6fb959.html"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/a1b00e20f425d.svg"></a><a class="social share-item link" onclick="util.copy(&quot;copy-link&quot;, &quot;å¤åˆ¶æˆåŠŸ&quot;)"><img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/social/8411ed322ced6.svg"></a></div>
        
        <div class="qrcode" id="qrcode-wechat" style="opacity:0;height:0">
          <img class="lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAAaADAAQAAAABAAAAAQAAAADa6r/EAAAAC0lEQVQIHWNgAAIAAAUAAY27m/MAAAAASUVORK5CYII=" data-src="https://api.qrserver.com/v1/create-qr-code/?size=256x256&data=https://blog.g0f.cn/post/8f6fb959.html">
        </div>
        
      </div>
    </section>
    </div>
</article>
<div class="related-wrap" id="read-next"><section class="body"><div class="item" id="prev"><div class="note">è¾ƒæ–°æ–‡ç« </div><a href="/post/75e043f9.html">é˜¿é‡Œäº‘å¦è®¤æ•ˆä»¿Soraä¸€çº¿å‘˜å·¥996ä½œæ¯ï¼›æä¸€èˆŸ199å…ƒAIè¯¾ç¨‹ä¸‹æ¶ï¼›è°·æ­Œæš‚åœGeminiç”Ÿæˆäººç‰©å›¾åƒåŠŸèƒ½ | æå®¢å¤´æ¡</a></div><div class="item" id="next"><div class="note">è¾ƒæ—©æ–‡ç« </div><a href="/post/9b8a73a1.html">2023å¹´æ€»ç»“</a></div></section></div>

<div class="related-wrap" id="related-posts">
    <section class="header">
      <div class="title cap theme">æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« </div>
    </section>
    <section class="body">
    <div class="related-posts"><a class="item" href="/post/61d30a8.html" title="A Guide to Open Source for the Social Sector"><span class="title">A Guide to Open Source for the Social Sector</span></a><a class="item" href="/post/468856e6.html" title="AppSec Is Harder Than You Think. Hereâ€™s How AI Can Help."><span class="title">AppSec Is Harder Than You Think. Hereâ€™s How AI Can Help.</span></a><a class="item" href="/post/4007b74f.html" title="Bringing Npm Registry Services to GitHub Codespaces"><span class="title">Bringing Npm Registry Services to GitHub Codespaces</span></a><a class="item" href="/post/aaedef42.html" title="Build Code Security Skills With the GitHub Secure Code Game"><span class="title">Build Code Security Skills With the GitHub Secure Code Game</span></a><a class="item" href="/post/1085f346.html" title="Copilot in GitHub Support Is Now Available!"><span class="title">Copilot in GitHub Support Is Now Available!</span></a></div></section></div>




<footer class="page-footer footnote"><hr><div class="sitemap"><div class="sitemap-group"><span class="fs15">åšå®¢</span><a href="/">è¿‘æœŸ</a><a href="/">åˆ†ç±»</a><a href="/">æ ‡ç­¾</a><a href="/">å½’æ¡£</a></div><div class="sitemap-group"><span class="fs15">é¡¹ç›®</span><a href="/">å¼€æºåº“</a></div><div class="sitemap-group"><span class="fs15">ç¤¾äº¤</span><a href="/">å‹é“¾</a><a href="/">ç•™è¨€æ¿</a></div><div class="sitemap-group"><span class="fs15">æ›´å¤š</span><a href="/">å…³äºæœ¬ç«™</a><a href="/">GitHub</a></div></div><div class="text"><p>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" rel="external nofollow noopener noreferrer" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œä¿ç•™ä½œè€…é“¾æ¥ï¼Œå¦‚éœ€åˆ é™¤å¯è”ç³»æˆ‘ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚<a href="https://blog.g0f.cn/sitemap.xml">sitemap</a></p>
</div></footer>
<div class="main-mask" onclick="sidebar.dismiss()"></div></div><aside class="l_right">
<div class="widgets">



<widget class="widget-wrapper toc" id="data-toc" collapse="false"><div class="widget-header dis-select"><span class="name">æœ¬æ–‡ç›®å½•</span><a class="cap-action" onclick="sidebar.toggleTOC()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg></a></div><div class="widget-body"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#faster-pack-generation-with-multi-pack-reuse"><span class="toc-text">Faster pack generation with multi-pack reuse</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#faster-rebases-and-much-more-with-git-replay"><span class="toc-text">Faster rebases (and much more) with git replay</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#the-whole-shebang"><span class="toc-text">The whole shebang</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#notes"><span class="toc-text">Notes</span></a></li></ol></li></ol></div><div class="widget-footer">

<a class="top" onclick="util.scrollTop()"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2c4.714 0 7.071 0 8.535 1.464C22 4.93 22 7.286 22 12c0 4.714 0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z"/><path stroke-linecap="round" stroke-linejoin="round" d="m9 15.5l3-3l3 3m-6-4l3-3l3 3"/></g></svg><span>å›åˆ°é¡¶éƒ¨</span></a></div></widget>
</div></aside><div class="float-panel blur">
  <button type="button" style="display:none" class="laptop-only rightbar-toggle mobile" onclick="sidebar.rightbar()">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6h11m-11 6h11m-11 6h11M4 6h1v4m-1 0h2m0 8H4c0-1 2-2 2-3s-1-1.5-2-1"/></svg>
  </button>
  <button type="button" style="display:none" class="mobile-only leftbar-toggle mobile" onclick="sidebar.leftbar()">
    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewbox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="1.5"><path d="M2 11c0-3.771 0-5.657 1.172-6.828C4.343 3 6.229 3 10 3h4c3.771 0 5.657 0 6.828 1.172C22 5.343 22 7.229 22 11v2c0 3.771 0 5.657-1.172 6.828C19.657 21 17.771 21 14 21h-4c-3.771 0-5.657 0-6.828-1.172C2 18.657 2 16.771 2 13z"/><path id="sep" stroke-linecap="round" d="M5.5 10h6m-5 4h4m4.5 7V3"/></g></svg>
  </button>
</div>
</div><div class="scripts">
<script type="text/javascript">
  const ctx = {
    date_suffix: {
      just: `åˆšåˆš`,
      min: `åˆ†é’Ÿå‰`,
      hour: `å°æ—¶å‰`,
      day: `å¤©å‰`,
    },
    root : `/`,
  };

  // required plugins (only load if needs)
  if (`local_search`) {
    ctx.search = {};
    ctx.search.service = `local_search`;
    if (ctx.search.service == 'local_search') {
      let service_obj = Object.assign({}, `{"field":"all","path":"/search.json","content":true,"sort":"-date"}`);
      ctx.search[ctx.search.service] = service_obj;
    }
  }
  const def = {
    avatar: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/3442075.svg`,
    cover: `https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/cover/76b86c0226ffd.svg`,
  };
  const deps = {
    jquery: `https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js`,
    marked: `https://cdn.bootcdn.net/ajax/libs/marked/4.0.18/marked.min.js`
  }
  

</script>

<script type="text/javascript">
  const utils = {
    // æ‡’åŠ è½½ css https://github.com/filamentgroup/loadCSS
    css: (href, before, media, attributes) => {
      var doc = window.document;
      var ss = doc.createElement("link");
      var ref;
      if (before) {
        ref = before;
      } else {
        var refs = (doc.body || doc.getElementsByTagName("head")[0]).childNodes;
        ref = refs[refs.length - 1];
      }
      var sheets = doc.styleSheets;
      if (attributes) {
        for (var attributeName in attributes) {
          if (attributes.hasOwnProperty(attributeName)) {
            ss.setAttribute(attributeName, attributes[attributeName]);
          }
        }
      }
      ss.rel = "stylesheet";
      ss.href = href;
      ss.media = "only x";
      function ready(cb) {
        if (doc.body) {
          return cb();
        }
        setTimeout(function () {
          ready(cb);
        });
      }
      ready(function () {
        ref.parentNode.insertBefore(ss, before ? ref : ref.nextSibling);
      });
      var onloadcssdefined = function (cb) {
        var resolvedHref = ss.href;
        var i = sheets.length;
        while (i--) {
          if (sheets[i].href === resolvedHref) {
            return cb();
          }
        }
        setTimeout(function () {
          onloadcssdefined(cb);
        });
      };
      function loadCB() {
        if (ss.addEventListener) {
          ss.removeEventListener("load", loadCB);
        }
        ss.media = media || "all";
      }
      if (ss.addEventListener) {
        ss.addEventListener("load", loadCB);
      }
      ss.onloadcssdefined = onloadcssdefined;
      onloadcssdefined(loadCB);
      return ss;
    },

    js: (src, opt) => new Promise((resolve, reject) => {
      var script = document.createElement('script');
      if (src.startsWith('/')){
        src = ctx.root + src.substring(1);
      }
      script.src = src;
      if (opt) {
        for (let key of Object.keys(opt)) {
          script[key] = opt[key]
        }
      } else {
        // é»˜è®¤å¼‚æ­¥ï¼Œå¦‚æœéœ€è¦åŒæ­¥ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ {} å³å¯
        script.async = true
      }
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    }),

    jq: (fn) => {
      if (typeof jQuery === 'undefined') {
        utils.js(deps.jquery).then(fn)
      } else {
        fn()
      }
    },
    
    onLoading: (el) => {
      if (el) {
        $(el).append('<div class="loading-wrap"><svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" stroke-opacity=".3" d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="1.3s" values="60;0"/></path><path stroke-dasharray="15" stroke-dashoffset="15" d="M12 3C16.9706 3 21 7.02944 21 12"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.3s" values="15;0"/><animateTransform attributeName="transform" dur="1.5s" repeatCount="indefinite" type="rotate" values="0 12 12;360 12 12"/></path></g></svg></div>');
      }
    },
    onLoadSuccess: (el) => {
      if (el) {
        $(el).find('.loading-wrap').remove();
      }
    },
    onLoadFailure: (el) => {
      if (el) {
        $(el).find('.loading-wrap svg').remove();
        $(el).find('.loading-wrap').append('<svg xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path stroke-dasharray="60" stroke-dashoffset="60" d="M12 3L21 20H3L12 3Z"><animate fill="freeze" attributeName="stroke-dashoffset" dur="0.5s" values="60;0"/></path><path stroke-dasharray="6" stroke-dashoffset="6" d="M12 10V14"><animate fill="freeze" attributeName="stroke-dashoffset" begin="0.6s" dur="0.2s" values="6;0"/></path></g><circle cx="12" cy="17" r="1" fill="currentColor" fill-opacity="0"><animate fill="freeze" attributeName="fill-opacity" begin="0.8s" dur="0.4s" values="0;1"/></circle></svg>');
        $(el).find('.loading-wrap').addClass('error');
      }
    },
    request: (el, url, callback, onFailure) => {
      let retryTimes = 3;
      utils.onLoading(el);
      function req() {
        return new Promise((resolve, reject) => {
          let status = 0; // 0 ç­‰å¾… 1 å®Œæˆ 2 è¶…æ—¶
          let timer = setTimeout(() => {
            if (status === 0) {
              status = 2;
              timer = null;
              reject('è¯·æ±‚è¶…æ—¶');
              if (retryTimes == 0) {
                onFailure();
              }
            }
          }, 5000);
          fetch(url).then(function(response) {
            if (status !== 2) {
              clearTimeout(timer);
              resolve(response);
              timer = null;
              status = 1;
            }
            if (response.ok) {
              return response.json();
            }
            throw new Error('Network response was not ok.');
          }).then(function(data) {
            retryTimes = 0;
            utils.onLoadSuccess(el);
            callback(data);
          }).catch(function(error) {
            if (retryTimes > 0) {
              retryTimes -= 1;
              setTimeout(() => {
                req();
              }, 5000);
            } else {
              utils.onLoadFailure(el);
              onFailure();
            }
          });
        });
      }
      req();
    },
  };
</script>

<script>
  const sidebar = {
    leftbar: () => {
      if (l_body) {
        l_body.toggleAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    rightbar: () => {
      if (l_body) {
        l_body.toggleAttribute('rightbar');
        l_body.removeAttribute('leftbar');
      }
    },
    dismiss: () => {
      if (l_body) {
        l_body.removeAttribute('leftbar');
        l_body.removeAttribute('rightbar');
      }
    },
    toggleTOC: () => {
      document.querySelector('#data-toc').classList.toggle('collapse');
    }
  }
</script>

<!-- required -->
<script src="/js/main.js?v=1.26.8" async></script>

<!-- optional -->

  <script>
  function load_comment(){
    if(!document.getElementById("waline_container"))return;
    utils.css('https://unpkg.com/@waline/client@v2/dist/waline.css');
    utils.js('https://unpkg.com/@waline/client@v2/dist/waline.js', {defer:true}).then(function () {
      const el = document.getElementById("waline_container");
      var path = el.getAttribute('comment_id');
      if (!path) {
        path = decodeURI(window.location.pathname);
      }
      Waline.init(Object.assign({"js":"https://unpkg.com/@waline/client@v2/dist/waline.js","css":"https://unpkg.com/@waline/client@v2/dist/waline.css","serverURL":"https://waline.g0f.cn","commentCount":true,"pageview":false,"locale":{"placeholder":"ä½ å¯ä»¥åœ¨éµå®ˆå›½å®¶æ³•å¾‹çš„å‰æä¸‹ç•…æ‰€æ¬²è¨€"}}, {
        el: '#waline_container',
        path: path,
        
      }));
    });
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    load_comment();
  });

</script>




<script>
  ctx.services = {
    fcircle: `/js/services/fcircle.js`,
    friends: `/js/services/friends.js`,
    ghinfo: `/js/services/ghinfo.js`,
    siteinfo: `/js/services/siteinfo.js`,
    mdrender: `/js/services/mdrender.js`,
    memos: `/js/services/memos.js`,
    sites: `/js/services/sites.js`,
    timeline: `/js/services/timeline.js`,
    weibo: `/js/services/weibo.js`,
  }
  window.addEventListener('DOMContentLoaded', (event) => {
    for (let id of Object.keys(ctx.services)) {
      const js = ctx.services[id];
      if (id == 'siteinfo') {
        ctx.cardlinks = document.querySelectorAll('a.link-card[cardlink]');
        if (ctx.cardlinks?.length > 0) {
          utils.js(js, { defer: true }).then(function () {
            setCardLink(ctx.cardlinks);
          });
        }
      } else {
        const els = document.getElementsByClassName(`stellar-${id}-api`);
        if (els?.length > 0) {
          utils.jq(() => {
            if (id == 'timeline' || 'memos' || 'marked') {
              utils.js(deps.marked).then(function () {
                utils.js(js, { defer: true });
              });
            } else {
              utils.js(js, { defer: true });
            }
          });
        }
      }
    }
  });
</script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    ctx.search = {
      path: `/search.json`,
    }
    utils.js('/js/search/local-search.js', { defer: true });
  });
</script><script>
  window.FPConfig = {
    delay: 0,
    ignoreKeywords: [],
    maxRPS: 5,
    hoverDelay: 25
  };
</script>
<script defer src="https://cdn.bootcdn.net/ajax/libs/flying-pages/2.1.2/flying-pages.min.js"></script><script defer src="https://cdn.bootcdn.net/ajax/libs/vanilla-lazyload/17.8.4/lazyload.min.js"></script>
<script>
  // https://www.npmjs.com/package/vanilla-lazyload
  // Set the options globally
  // to make LazyLoad self-initialize
  window.lazyLoadOptions = {
    elements_selector: ".lazy",
  };
  // Listen to the initialization event
  // and get the instance of LazyLoad
  window.addEventListener(
    "LazyLoad::Initialized",
    function (event) {
      window.lazyLoadInstance = event.detail.instance;
    },
    false
  );
  document.addEventListener('DOMContentLoaded', function () {
    window.lazyLoadInstance?.update();
  });
</script><script>
  ctx.fancybox = {
    selector: `.timenode p>img`,
    css: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.min.css`,
    js: `https://cdn.bootcdn.net/ajax/libs/fancyapps-ui/5.0.22/fancybox/fancybox.umd.min.js`
  };
  var selector = '[data-fancybox]:not(.error)';
  if (ctx.fancybox.selector) {
    selector += `, ${ctx.fancybox.selector}`
  }
  var needFancybox = document.querySelectorAll(selector).length !== 0;
  if (!needFancybox) {
    const els = document.getElementsByClassName('stellar-memos-api');
    if (els != undefined && els.length > 0) {
      needFancybox = true;
    }
  }
  if (needFancybox) {
    utils.css(ctx.fancybox.css);
    utils.js(ctx.fancybox.js, { defer: true }).then(function () {
      Fancybox.bind(selector, {
        hideScrollbar: false,
        Thumbs: {
          autoStart: false,
        },
        caption: (fancybox, slide) => {
          return slide.triggerEl.alt || null
        }
      });
    })
  }
</script><script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const swiper_api = document.getElementById('swiper-api');
    if (swiper_api != undefined) {
      utils.css(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.css`);
      utils.js(`https://unpkg.com/swiper@10.3.1/swiper-bundle.min.js`, { defer: true }).then(function () {
        const effect = swiper_api.getAttribute('effect') || '';
        var swiper = new Swiper('.swiper#swiper-api', {
          slidesPerView: 'auto',
          spaceBetween: 8,
          centeredSlides: true,
          effect: effect,
          loop: true,
          pagination: {
            el: '.swiper-pagination',
            clickable: true,
          },
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      })
    }
  });
</script><script>
  document.addEventListener('DOMContentLoaded', function () {
    window.codeElements = document.querySelectorAll('.code');
    if (window.codeElements.length > 0) {
      ctx.copycode = {
        default_text: `Copy`,
        success_text: `Copied`,
        toast: `å¤åˆ¶æˆåŠŸ`,
      };
      utils.js('/js/plugins/copycode.js');
    }
  });
</script>


<!-- inject -->

</div></body></html>
